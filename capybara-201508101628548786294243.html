<!DOCTYPE html><html class=" js flexbox canvas canvastext no-webgl touch no-geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms no-csstransforms3d csstransitions fontface no-generatedcontent no-video no-audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><head><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\:form{display:block;}</style>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="fragment" content="!">
    <meta name="apple-itunes-app" content="app-id=584397734">
    <meta name="google-play-app" content="app-id=com.kingsoopers.mobile">

    
    
    
    
    
    
    
    
    
    

    <title>King Soopers</title>
    <link rel="shortcut icon" href="/static/version/image/favicon/kingsoopers.ico">
    <link rel="icon" type="image/x-icon" href="/static/version/image/favicon/kingsoopers.ico">

    <link rel="stylesheet" type="text/css" href="/static/version/stylesheet/application-site-header-footer.css">
    <link rel="stylesheet" type="text/css" href="/static/version/stylesheet/application-site.css">
    
    <link rel="stylesheet" type="text/css" href="/static/shoppinglist/api/build/shopping-list-components.css">

    
    
    
    
    

    

    <iframe src="https://1817628.fls.doubleclick.net/activityi;src=1817628;type=alldi391;cat=kroge703;u1=KingSoopers;ord=1;num=3062825559172.7793?" width="1" height="1" style="display: none;"></iframe><script type="text/javascript">
        
         window.staticContentPath = '/static/version';
         
        window.localEnvironment = {};
    </script>
    <script src="/static/version/javascript/vendor/html5shiv.js"></script>
    <script src="/static/version/javascript/vendor/bowser.js"></script>
    <script src="/static/version/javascript/source/banner/unsupportedBrowsers.js"></script>

    <!-- if devLoadScripts is on, then jquery and angular are loaded up above from local -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.9/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.9/angular-sanitize.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.9/angular-route.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.9/angular-resource.min.js"></script>
    <script src="/static/shoppinglist/api/build/shopping-list-api.js?cacheVersion=3.6.0"></script>
    <script src="/static/version/javascript/q.js"></script>

    
    <script src="/static/version/javascript/init.js"></script>
    <script src="/static/version/javascript/require.js"></script>
    <script src="/static/version/javascript/boot.prod.js"></script>
    

    <script type="text/javascript">
    requireQ(["everything"], function() {
  angular.module('environment', []).factory('EnvLookup', function() {
  return {
  bannerName: 'KingSoopers',
  bannerWithDeals: true,
  bannerDisplayName: 'King Soopers',
  contextPath: '',
  divisionBanner: 'KINGSOOPERS',
  firstName: null,
  loggedIn: false,
  enrolledInCommunityRewards: null,
  hasLoyaltyCard : 'undefined',
  isBeingPrerenderedForSearchCrawler : false,
  divisionNumber: null,
  storeCode: null,
  deliBakeryLinkEnabled : 'true',
  bannerParticipates: null,
  storeParticipates: null,
  kingsoopersParticipates : null,
  externalUrls: null,
  internalUrls: null,
  hasPharmacy: 'true',
  hasDeliBakery: 'true',
  bannerSiteDomain: 'KingSoopers.com',
  bannerSiteName: 'King Soopers',
  plusCardName: 'SooperCard',
  addToListEnabled: false,
  noOfAllowedAttempts: '2',
  changePasswordPromptDate: '2014-May-27',
  heartBleedMessage: 'Our records indicate that you haven\'t changed your password recently. For security purposes, we recommend that you reset your password at this time.',
  isHeartBleedEnabled: 'true',
  contentVersion: '14f19a5f3d9',
  isCouponSearchEnabled: true,
  isCouponSearchEnabledBanner: true,
  isRecipeSearchEnabledBanner: true,
  isProductSearchEnabledBanner: true,
  isSearchServiceContentEnabled: null,
  nearStoreLocatorRadius: 8000,
  isStoreLocatorServiceEnabled: true,
  isAisleLocationEnabled: true,
  isPinnedListAnimationEnabled: false,
  isAddToListFromWeeklyAdGadgetEnabled: true,
  couponPromotion: false,
  isCouponPromotionsEnabled: true,
  isWeeklyAdsEnabledForFM: false,
  couponPromotionPublishedAs: null,
  couponPromotionTabName: null,
  couponPromotionFilterTag: null,
  couponPromotionViewAllURL: null,
  couponPromotionImageId: null,
  couponPromotionMessageHeader: null,
  couponPromotionMessageText: null,
  couponPromotionButtonText: null,
  couponPromotionButtonAltId: null,
  couponPromotionButtonUrl: null,
  couponPromotionNotLoggedInMessageHeader: null,
  couponPromotionNotLoggedInMessageText: null,
  couponPromotionNotLoggedInButtonText: null,
  couponPromotionNotLoggedInButtonAltId: null,
  couponPromotionNotLoggedInButtonUrl: null,
  homeShopCookieName: 'eComm',
  homeShopBaseUrl: '/onlineshopping',
  homeShopShopNowUrl: '/onlineshopping',
  homeShopMyAccountEnabled: true,
  homeShopPickStoreServiceIntegrationEnabled: false,
  homeShopSecondPickStoreEnabled: false,
  searchServiceUrl:null,
  isRecipeRatingEnabled:false,
  isFacebookSharingEnabled:false,
  isPinterestSharingEnabled:true,
  isTwitterSharingEnabled:true,
  couponSpecialPromotionsEmailPreferenceId: 'Weekly Circular',
  couponSpecialPromotionsWebPostFlag: 'WeeklyAd',
  couponSpecialPromotionsFilteredTags: 'HOT',
  couponSpecialPromotionsGroupOptionId: 'Special Promotions and Opportunities',
  couponSpecialPromotionsEnabled: true,
  fredMeyerGrBaseDomain: '',
  fredMeyerCatalogId: '',
  fredMeyerStoreId: '',
  fredMeyerInstoreMenuEndpoint: '',
  fredMeyerGiftRegistryAutocompleteUrl: '',
  isManageAltIdEnabled: true,
  OnlineOrderingAvailableCatalog: '',
  OnlineOrderingBrandName: 'Online Shopping',
  storeLocatorKey: 'AjxJ7VdncRQa6sl8Y-S6jdiqgGDzj7IKYT-0cvaIJsrvGuWk19f2OVnC2ym-_sGD',
  callCenterPhoneNumber: '1-866-221-4141',
  careersPageUrl: '/topic/careers-2',
  storeLocatorOptions : {
    text: 'Store',
    showServices: true,
    showAllBanners: true,
    showFuel: true,
    brand: 'KINGSOOPERS'
  },
  bannerIsAuthenticated : true,
  wishabiWeeklyAdEnvironment: 'prod',
  divisionMap : {'011':'Atlanta','034':'Southwest','024':'Louisville','014':'Cincinnati','025':'Delta','026':'Nashville','016':'Columbus','018':'Michigan','029':'MidAtlantic','021':'Central'},
  listApiPath: '/api/shoppinglist',
  listJsApiVersion: '3.6.0',
  isPinnedShoppingListEnabled: true,
  isPinnedShoppingListLinkOnlyMode: false,

  pid: '',
  channel: 'web',
  loyalMember: null,
  omnitureAccount: 'krgrkingsoopersprod,krgrglobalprod',
  pscUrl: '/mysavings',
  preferredStoreDetails : null
  };
  });
});
  window.localEnvironment.flash = {
  slotContent: []
  }
  
</script>
    <script type="text/javascript">
  requireQ(["everything"], function() {
  angular.module('featureManager', []).factory('FeatureManager', function() {
    var activeFeatures = 'TOPIC_URL_OPTIMIZED,PRERENDER,SCENE_STREAMING,ECSB_STORE_LOCATOR'.split(',');

  return {
    isActive: function(name) {
      return $.inArray(name, activeFeatures);
    }
  };
  });

   });
  window.localEnvironment.flash = {
  slotContent: []
  }

  </script>
<script type="text/javascript">
window.localEnvironment.servicesOffered = {
  slotContent: ['559a845784ae6f7d3979baae','559a845784ae6f7d3979baad','559a845784ae6f7d3979baac','559a845784ae6f7d3979baaa','559a845784ae6f7d3979baa9','559a845784ae6f7d3979baa8','559a845784ae6f7d3979baa7','559a845784ae6f7d3979baa6','559a845784ae6f7d3979baab','559a845784ae6f7d3979baa3'],
    attributes : ''
};
</script><meta id="viewport" name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="banner" data-requiremodule="/static/version/javascript/application-site-cdn-r.js" src="/static/version/javascript/application-site-cdn-r.js"></script></head>



<body ng-really-cloak="true" id="ng-app" style="display: block;" class="ng-scope -responsive-enabled">
<div ng-click="goToTop()"><div data-qa="scroll to top" class="scroll-to-top" ng-class="{'-visible': showScrollTopButton}"></div><div class="scroll-to-top-arrow" ng-class="{'-visible': showScrollTopButton}"></div></div>

<span id="changeStoreContainer" class="slot">

  <script>requireQ(["everything"], function() {
  melange.gadgets.changeStoreController = function () {
    return function ($rootScope,
                     $scope,
                     windowReload,
                     StoreLocator,
                     StoreFunctions,
                     AccountService,
                     BrowserVersion,
                     Beacon,
                     timeoutService,
                     EnvLookup,
                     triggerChangeStoreGadgetService) {
      var loggedIn = EnvLookup.loggedIn;
      var init = function () {
        $scope.showChangeStore = false;
        $scope.storeLocatorText = EnvLookup.storeLocatorOptions.text;
        resetSearchFields();
      };

      triggerChangeStoreGadgetService.onTrigger(function () {
        $rootScope.$broadcast('closeStoreReminder');
        $scope.showChangeStore = true;
        $scope.storeSearchTerm = "";
        findStores($.cookie("StoreZipCode"));
      });

      $scope.searchStore = function () {
        findStores($scope.storeSearchTerm);
        $scope.searchMessage = 'Showing the top 5 results for ' + $scope.storeSearchTerm;
      };

      var findStores = function (searchTerm) {
        if (searchTerm) {
          $scope.currentSearchTerm = searchTerm;
          StoreLocator.query({address: searchTerm, radius: '3000', maxResults: 5}, function (data) {
            $scope.results = data;
            if (_.isEmpty($scope.results)) {
              resetSearchFields();
              $scope.storeErrorText =
              "No " + $scope.storeLocatorText.toLowerCase() + "s were found within 3000 miles. Please provide additional address information or try again later.";
            } else {
              $scope.searchTerm = searchTerm;
              $scope.storeErrorText = "";
              $scope.showMoreResults = true;
            }
            getServiceIcons($scope.results);
          }, function () {
            resetSearchFields();
            $scope.storeErrorText =
            "We're sorry, the search service is not available right now. Please try your search again later.";
          });
        }
      };

      var getServiceIcons = function (stores) {
        if (stores) {
          _.each(stores, function (store) {
            StoreFunctions.getStoreServicesIcons(store);
          });
        }
      };

      var resetSearchFields = function () {
        $scope.searchTerm = "";
        $scope.results = [];
        $scope.storeErrorText = "";
        $scope.showMoreResults = false;
      };

      $scope.close = function () {
        resetSearchFields();
        $scope.showChangeStore = false;
        timeoutService.timeout(function() {
          $("a.change-store-link").focus();
        }, 0, false);
      };

      $scope.focusTopOfModal = function () {
        timeoutService.timeout(function() {
          $("#changeStoreSideModal").focus();
        }, 0, false);
      }

      $scope.focusOnMoreResultsLink = function () {
        //if ($scope.modalHeadingFocus) {
          timeoutService.timeout(function () {
            $("#moreResults").focus();
          }, 0, false);
        //}
      }

      $scope.makePreferredStore = function (store) {
        Beacon.registerPreferredStoreChange('Change Store Popup');
        timeoutService.timeout(function () {
          if (loggedIn)
            AccountService.updatePreferredStore({'store': store}, function () {
              updatePreferredStoreAndCloseModal(store)
            }, function (response) {
              store.storeInformationErrorText = response.data.errorMessage != null ?
                response.data.errorMessage : "We're sorry, we are currently experiencing technical difficulties. Please try again later.";
              Beacon.registerPreferredStoreChangeError('Change Store Popup', 'server error');
            });
          else {
            updatePreferredStoreAndCloseModal(store);
          }
        }, 200);
      };

      var updatePreferredStoreAndCloseModal = function (store) {
        store.storeInformationErrorText = "";
        $scope.close();
        StoreFunctions.makePreferredStore(store);
        windowReload.reload();
      };

      $scope.getStoreNumber = function () {
        var newVar = StoreFunctions.getDivisionId() + StoreFunctions.getStoreNumber();
        return  newVar;
      };

      $scope.getDescription = function (store) {
        return StoreFunctions.getDescription(store);
      };

      $scope.isPreferredStoreSet = function () {
        if (StoreFunctions.getPreferredStoreDetails()) {
          return true;
        }
        return false;
      };

      init();
    }
  };

  melange.controller('changeStoreController', [
    '$rootScope', '$scope', 'windowReload', 'storeLocator.Service', 'storeFunctions.Service',
    'account.Service', 'browserVersion.Service', 'beacon.Service', 'timeoutService', 'EnvLookup', 'triggerChangeStoreGadgetService',
    melange.gadgets.changeStoreController()
  ]);
});</script>
  <span ng-controller="changeStoreController" class="scoped-to-banner ng-scope">
    <div id="changeStoreSideModal" side-modal="showChangeStore" data-qa="change store side modal" tabindex="-1" ng-focus="modalHeadingFocus=true;" ng-blur="modalHeadingFocus=false;" class="ng-isolate-scope -hidden side-modal">
      <div class="side-modal-window-shade"></div>
      <div class="side-modal-inner">
        <h1 id="changeStoreHeading" class="side-modal-heading ng-binding ng-hide" ng-show="isPreferredStoreSet()" data-qa="change-preferred-store-heading">Change Preferred Store</h1>
        <h1 id="selectStoreHeading" class="side-modal-heading ng-binding" ng-hide="isPreferredStoreSet()" data-qa="select-preferred-store-heading">Select Preferred Store</h1>
        <a kr-shift-tab="focusOnMoreResultsLink()" class="side-modal-close-button" ng-click="close()" data-qa="change store close button" tabindex="-1" href="" aria-label="Close Change Store Section">Close</a>
        <div id="storeSideModalSearchBox" class="side-modal-scrollable-area">
            <form ng-submit="searchStore()" name="searchStoreForm" class="change-store-search-field ng-valid ng-dirty">
                <input id="changeStoreSearch" aria-label="search for store" data-qa="change store search input" name="store" type="text" ng-model="storeSearchTerm" ng-focus="true" placeholder="ZIP Code -OR- City,State" class="ng-valid ng-dirty">
                <input type="submit" data-qa="change store submit button" value="Search">
            </form>
            <div class="offscreen ng-binding" aria-relevant="text" role="alert" aria-live="assertive">  </div>
            <div ng-show="storeErrorText" class="alert-error change-store-search-error ng-hide" data-qa="change store search error">
              <p class="ng-binding"></p>
            </div>
            <div class="change-store-content">
            <h3 ng-show="searchTerm" data-qa="change store results heading" class="ng-binding ng-hide">Showing the top 5 results for </h3>
            <ol>
              <!-- ngRepeat: store in results -->
            </ol>
            <a id="moreResults" class="change-store-more-results-link ng-hide" ng-show="showMoreResults" data-qa="showMoreResults" ng-href="/storeLocator?storeSearchTerm=&amp;distance=3000" kr-tab="focusTopOfModal()" href="/storeLocator?storeSearchTerm=&amp;distance=3000">More Results &gt;&gt;</a>
          </div>
        </div>
      </div>
    </div>
  </span>
</span>

<div class="responsive-body-wrapper" responsive-body="true" style="top: 0px;">
  <div>

    <!--
    OnlineOpinion v5.6.5
    Released: 12/17/2012. Compiled 01/02/2013 10:54:34 AM -0600
    Branch: master 6f7c9076b20d959805996192556bbd12b2014c7d
    Components: Full
    The following code is Copyright 1998-2013 Opinionlab, Inc.  All rights reserved. Unauthorized use is prohibited. This product and other products of OpinionLab, Inc. are protected by U.S. Patent No. 6606581, 6421724, 6785717 B1 and other patents pending. http://www.opinionlab
    --><!-- INVITATION PROMPT MARKUP -->
    <noscript>This JavaScript enables OnlineOpinion, a method for collecting secure feedback data.</noscript>
    <!-- IE 8 fix for handling the OpinionLab popup... -->
    <!--[if lt IE 9 ]>
    <script type="text/javascript">
        requireQ(["everything"], function () {
            (function () {
                var b = 0;

                function launchOOPopupInitOverride() {
                    var h = this.options,
                            g = h.newWindowSize || [545, 325],
                            m = [parseInt((h.metrics.height - g[1]) / 2, 10), parseInt((h.metrics.width - g[0]) / 2, 10)],
                            l, k, j = "location=no,status=no,width=" + g[0] + ",height=" + g[1] + ",top=" + m[0] + ",left=" + m[1],
                            ie7 = OOo.Browser.IE && navigator.userAgent.search("MSIE 7") !== -1,
                            ie8 = OOo.Browser.IE && navigator.userAgent.search("MSIE 8") !== -1;

                    windowName = "OnlineOpinion";

                    if (h.newWindow) {
                        windowName = windowName + (b++)
                    }

                    h.metrics.time2 = (new Date()).getTime();
                    h.metrics.type = "Popup";

                    if (h.asm || ie8) {
                        j += ",scrollbars=1"
                    }

                    l = OOo.appendOOForm(h, windowName);
                    k = window.open(ie7 || ie8 ? h.commentCardUrl || "https://secure.opinionlab.com/ccc01/comment_card_d.asp?" + l.children[0].value : "", windowName, j);

                    if (k && !ie7 && !ie8) {
                        l.submit()
                    }
                }

                OOo.extend(OOo.Ocode.prototype, {
                    launchOOPopup: launchOOPopupInitOverride
                })
            }());
        });
    </script>
    <![endif]-->
    <!-- END: OnlineOpinion v5.6.5 -->

    <script>/*<![CDATA[*/
requireQ(["everything"], function() {
  melange.controller('melange.app.opinionLabController', ['$scope', '$rootScope', '$window', '$timeout', 'EnvLookup', function($scope, $rootScope, $window, $timeout, EnvLookup) {
    $scope.popupIsVisible = false;
    $scope.isLittleClinic = EnvLookup.bannerName === 'TheLittleClinic';

    $scope.showPopup = function() {
      $scope.popupIsVisible = true;
    };

    $scope.hidePopup = function() {
      $scope.popupIsVisible = false;
    };

    $scope.showFeedback = function() {
      $scope.hidePopup();
      new OOo.Ocode({referrerRewrite:window.location.href.split('?')[0]}).show();
    };

    $rootScope.$on('showOpinionLabPopup', $scope.showPopup);

  }]);
});

/*]]>*/
</script>

    <div ng-controller="melange.app.opinionLabController" class="scoped-to-banner ng-scope">
        <div id="oo_tab" class="oo_tab_right" tabindex="0" ng-click="showPopup()" ng-hide="popupIsVisible">
            <div data-qa="opinion_lab_feedback_link">
                <span></span>
            </div>
            <div class="screen_reader">Activate to launch feedback</div>
        </div>

        <div class="opinionlab-popup ng-isolate-scope -hidden side-modal" side-modal="popupIsVisible" data-qa="opinionlab popup">
            <div class="side-modal-inner">
                <h1 class="side-modal-heading">Feedback</h1>

                <div class="side-modal-close-button" ng-click="hidePopup()" data-qa="opinionlab popup close button">
                    Close
                </div>
                <div class="side-modal-scrollable-area">
                    <div class="opinionlab-popup-content -first">
                        <div id="kroger_env"></div>
                        <h2>Need assistance? Email us.</h2>

                        <p>Send us your comments, questions and suggestions by email. We'll get right back to
                            you.</p>
                        <a class="button" data-qa="opinionlab email us link" href="/customercomments">Email
                            Us</a>
                    </div>
                    <div class="opinionlab-popup-content -second">
                        <div id="kroger_girl"></div>
                        <h2>Need assistance? Call us.</h2>

                        <p>Our Customer Service Ambassadors are ready to help you at <br><span phone-link="1-866-221-4141" class="ng-isolate-scope"><!-- ngIf: !showAnchor --><span ng-if="!showAnchor" class="ng-scope ng-binding">1-866-221-4141</span><!-- end ngIf: !showAnchor --><!-- ngIf: showAnchor --></span></p>
                        <a class="button" target="_blank" data-qa="opinionlab call us link" href="/topic/contact-us">Call Us</a>
                    </div>
                    <div class="opinionlab-popup-content -third">
                        <div id="kroger_bubble"></div>
                        <h2>Leave website feedback</h2>

                        <p>We want to hear from you, but please note that we cannot respond directly to your
                            feedback.</p>
                        <a class="button" href="javascript:void(0)" ng-click="showFeedback()">Leave Feedback</a>
                    </div>
                </div>
            </div>
            <div class="side-modal-window-shade"></div>
        </div>
    </div>

</div>
  <div><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
  //<![CDATA[
  var axel = Math.random();
  var a = axel * 10000000000000;
  var bannerName ='KingSoopers'+ "";
  var url;
  if(bannerName == "TomT") {
    url = 'https://4884002.fls.doubleclick.net/activityi;src=4884002;type=' + 'alldi391' +';cat=' + 'kroge703' +';ord=' + a + '?';
  } else {
    url = 'https://1817628.fls.doubleclick.net/activityi;src=1817628;type=' + 'alldi391' +';cat=' + 'kroge703' +';u1=' +'KingSoopers'+';ord=1;num=' + a + '?';
  }
  var iframe = document.createElement("iframe");
  iframe.src = url;
  iframe.width = 1;
  iframe.height = 1;
  iframe.style.display = 'none';
  iframe.frameborder = 0;
  var reference = document.getElementsByTagName('script')[0];
  reference.parentNode.insertBefore(iframe, reference);
  //]]>

</script>

<noscript>
  &lt;iframe width="1" height="1" frameborder="0" style="display:none" src="https://1817628.fls.doubleclick.net/activityi;src=1817628;type=alldi391;cat=kroge703;u1=[Division];ord=1;num=1?"&gt;&lt;/iframe&gt;
</noscript></div>
  <div>
    <div class="flash-message-gadget">
  <script>/*<![CDATA[*/
requireQ(["everything"], function() {
  common.register('melange.gadgets.flashMessage', function () {
    return function ($scope, Content, Beacon) {
      var flashMessageTimeStamp;

      var initialize = function () {
        var slot_content = window.localEnvironment.flash.slotContent;
        Content.queryBySlotContent(slot_content, function (data) {
          if (!_.isEmpty(data)) {
            $scope.flashMessages = _.sortBy(data, function (flashMessage) {
              return flashMessage.order ? 1 / flashMessage.order.all : 0;
            });
            flashMessageTimeStamp = data[0].lastUpdatedOn;
          }
        });
      };

      $scope.shouldShowMessage = function () {
        return $scope.flashMessages && (!$.cookie("closedFlashMessageTimeStamp") ||
                                        ($.cookie("closedFlashMessageTimeStamp") !=
                                         flashMessageTimeStamp));
      };

      $scope.close = function () {
        Beacon.closeFlashMessage();
        $.cookie("closedFlashMessageTimeStamp", flashMessageTimeStamp);
      };

      initialize();
    }
  });

  melange.controller("flashMessageController",
      ['$scope', 'content.Service', 'beacon.Service', melange.gadgets.flashMessage()]);
});
/*]]>*/</script>
  <div ng-controller="flashMessageController" class="ng-scope">
    <div ng-show="shouldShowMessage()" class="flashMsgContainer ng-hide" data-qa="lol">
      <ul id="flashMsgList">
        <!-- ngRepeat: flashMessage in flashMessages -->
      </ul>
      <a class="flashCloseButton" ng-click="close()" href="" aria-describedby="flashMsgList" aria-label="Close Messages" data-qa="bahaha">X</a>
    </div>
  </div>
</div>
  </div>
  <div><div id="browserWarnMsg" class="-hidden">
  <p>In order to use this site, please make sure that your cookies are enabled, then click <a href="javascript:history.go(0)">here</a> to refresh the page.</p>
</div>

<script type="text/javascript">

  requireQ(["everything"], function() {
    $(function(){
      var responsiveEnabled = $('.row-fluid').length > 0;

      if(!$.smartbanner) {
        return;
      }

      $.smartbanner({
        title:'KingSoopers',
        author:'KingSoopers',
        price:'FREE',
        appStoreLanguage: 'us',
        inAppStore: 'On the App Store',
        inGooglePlay: 'In Google Play',
        icon: '/static/version/image/appicon/kingsoopers.png',
        iconGloss: null,
        button: 'View',
        scale: responsiveEnabled ? 1 : "auto",
        speedIn: 300,
        speedOut: 400,
        daysHidden: 15,
        daysReminder: 15,
        force: null  });

      var  ce = navigator.cookieEnabled;
      if (typeof navigator.cookieEnabled === "undefined") {
        if(!ce){
          document.cookie = "any";
          ce = (document.cookie.indexOf("any") !== -1);
          document.cookie = ""
        }
      }

      if(!ce )
        $( "#browserWarnMsg" ).removeClass("-hidden");

      if(!responsiveEnabled){
        $("#smartbanner").css("width", "1020px");
      }
    });
  });

</script>



</div>
  <div id="grid-wrap" class="row-fluid">
    <div class="main">
      <div id="fadeoutFlashMessages" messages="fadeoutFlashMessages" class="ng-isolate-scope"><ul role="alert" aria-live="assertive"><!-- ngRepeat: message in messages --></ul></div>
      <div><script>/*<![CDATA[*/

requireQ(["everything"], function() {
  melange.controller('melange.app.responsiveNavigationController', [
    '$scope', '$timeout', '$rootScope', 'beacon.Service', "EnvLookup",
    melange.app.responsiveNavigationController = function ($scope, $timeout, $rootScope, Beacon, EnvLookup) {
      $scope.hideResponsiveNav = true;
      $scope.showResponsiveNav = false;
      $scope.bannerIsAuthenticated = EnvLookup.bannerIsAuthenticated;

      var toggleResponsiveNavOff = function () {
        $rootScope.$broadcast('showResponsiveNav', false);
        $scope.showResponsiveNav = false;
        $timeout(function () {
          $scope.hideResponsiveNav = true;
        }, 500);
      };

      $scope.$on("forceCloseResponsiveNav", toggleResponsiveNavOff);

      $scope.toggleResponsiveNav = function () {
        if (!$scope.showResponsiveNav) {
          Beacon.registerMobileMenuExpansion();
          $scope.hideResponsiveNav = false;
          $timeout(function () {
            $rootScope.$broadcast('showResponsiveNav', true);
            $scope.showResponsiveNav = true;
          }, 0);
        } else {
          toggleResponsiveNavOff();
        }
      };

    }
  ]);
});
/*]]>*/
</script>
<script>
  window.localEnvironment.signIn = {
    rememberMeEmail: null,
    rememberMeOption: null
  };
  window.localEnvironment.siteLogo = {
    bannerDisplayName: 'King Soopers'
  };
  window.localEnvironment.topNavigation = {
    slotContent: ['520b89743283475a6784e56f']
  };
</script>

<header role="banner">
  <div ng-controller="melange.app.responsiveNavigationController" class="scoped-to-banner ng-scope">
    <div class="mobile-header">
      <a class="mobile-header-menu-button" data-qa="mobile header menu button" ng-class="{'active': showResponsiveNav}" ng-click="toggleResponsiveNav()"></a>
      <div class="mobile-menu-close-overlay ng-hide" ng-show="showResponsiveNav" ng-click="toggleResponsiveNav()"></div>
      <a href="/" ng-click="track()" class="mobile-header-brand">King Soopers</a>
    </div>

    <div id="aboveNavigation">
      <script>/*<![CDATA[*/
requireQ(["everything"], function() {
  melange.controller("headerController", [
    '$rootScope', '$scope', 'storeFunctions.Service', 'beacon.Service', '$window', '$timeout', 'EnvLookup', 'waitTime.Service', 'triggerChangeStoreGadgetService',
    melange.gadgets.navigationGadget =
    function ($rootScope, $scope, storeFunctions, Beacon, $window, $timeout, EnvLookup, WaitTimeService, triggerChangeStoreGadgetService) {
      $scope.preferredStoreId = '';

      $scope.isLittleClinic = EnvLookup.bannerName == 'TheLittleClinic';
      $scope.showStoreDrawer = false;
      $scope.storeLocatorText = EnvLookup.storeLocatorOptions.text;

      var updateWaitTime = function() {
        if($scope.isLittleClinic) {
          var details = storeFunctions.getPreferredStoreDetails();
          if (details) {
            WaitTimeService.getWaitTime({clinicId: details.recordId}, function (data) {
              $scope.waitTime = data.description;
            });
          }
        }
      };

      var updateStoreCookies = function(){
        if(EnvLookup.loggedIn && !_.isUndefined(EnvLookup.preferredStoreDetails) && EnvLookup.preferredStoreDetails != null) {
          storeFunctions.makePreferredStore(EnvLookup.preferredStoreDetails);
        }
      };

      updateWaitTime();
      updateStoreCookies();

      $scope.isPreferredStoreSelected = function () {
        return $scope.preferredStoreId != '';
      };

      $scope.showWaitTimeIndicator = function () {
        return $scope.isLittleClinic && $scope.isPreferredStoreSelected();
      };

      $scope.openChangeStoreDrawer = function () {
        Beacon.registerChangeStoreLinkClick('change');
        triggerChangeStoreGadgetService.trigger();
        $timeout(function() {
          $("#changeStoreSideModal").focus();
        }, 0, false);
      };

      $scope.toggleStoreDrawer = function () {
        $rootScope.$broadcast('closeStoreReminder');
        $rootScope.$broadcast('headerDrawerWasToggled', 'storeDrawer');
        $scope.showStoreDrawer = !$scope.showStoreDrawer;
      };

      $scope.$on('headerDrawerWasToggled', function (e, drawerName) {
        if (drawerName != 'storeDrawer') {
          $scope.showStoreDrawer = false;
        }
      });

      $scope.$on('updateWaitTime', function(e) {
        updateWaitTime();
      });

      $scope.getPreferredStoreDetails = function () {
        var details = storeFunctions.getPreferredStoreDetails();
        if (details) {
          $scope.preferredStoreId = details.recordId;
          return details.address.prettyString;
        }
        return "No Store Selected";
      };

      $scope.preferredStoreAddress = $scope.getPreferredStoreDetails();

      $scope.isPreferredStoreSet = function () {
        if (storeFunctions.getPreferredStoreDetails()) {
          return true;
        }
        return false;
      };

      $scope.trackPreferredStoreClick = function () {
        Beacon.registerStoreClick('my store');
        $window.location.href = '/storeHours?store=' + $scope.preferredStoreId;
      };

      $scope.trackFindStoreLink = function () {
        Beacon.registerStoreClick('find a store');
      };

      common.linkBinder.bindOne("a[data-id='find-store-link']", $scope.trackFindStoreLink);
    }
  ]);
});
/*]]>*/
</script>
      <div id="siteLogoContainer" class="slot">
  <!--<script th:inline="javascript" type="text/javascript">-->
    <!--window.localEnvironment.siteLogo = {-->
      <!--bannerName: [[${bannerName}]]-->
    <!--};-->
  <!--</script>-->
  <script>/*<![CDATA[*/
requireQ(["everything"], function() {
  common.register('melange.gadgets.siteLogo',
      melange.gadgets.siteLogo = function ($scope, Beacon, EnvLookup) {

        $scope.trackSiteLogo = function () {
          Beacon.registerSiteLogoClick();
        };

        $scope.bannerName = EnvLookup.bannerName;

      });
  melange.controller('siteLogoGadgetController',
      ['$scope', 'beacon.Service', 'EnvLookup' , melange.gadgets.siteLogo]);
});
/*]]>*/
</script>
  <div ng-controller="siteLogoGadgetController" class="site-logo-gadget ng-scope">
    <div id="logo" data-qa="siteLogo">
      <a href="/" ng-click="trackSiteLogo()">
        <img class="site-logo-gadget__image" alt="KingSoopers Logo" title="KingSoopers" src="/asset/51f1651a84ae7c752c809f33?data=1">
      </a>
    </div>
  </div>
</div>
      <div class="headerContainer ng-scope" ng-controller="headerController">
      <div id="preferredStore" ng-class="{'-little-clinic': isLittleClinic}">
        <a href="javascript:void(0);" ng-click="toggleStoreDrawer()" ng-class="{active: showStoreDrawer}" class="store-drawer-toggle"><span class="drawer-toggle-hidden-label">Preferred Store Information</span></a>
        <change-store-reminder store-text="storeLocatorText" class="ng-isolate-scope" style="display: inline; opacity: 0.31983877579990266;"></change-store-reminder>
        <div class="preferred-store-drawer" ng-class="{'drawer-visible': showStoreDrawer}">
          <div class="preferred-store-drawer-wrapper" data-qa="preferred store section">
            <h4 data-qa="preferred store heading" class="ng-binding">My Store: </h4>
            <a data-qa="preferred store hours link" class="storeHoursLink ng-binding ng-hide" ng-hide="preferredStoreId == ''" ng-click="trackPreferredStoreClick()" href="" ng-bind-html="getPreferredStoreDetails() | trusted">No Store Selected</a>
            <p ng-show="preferredStoreId == ''" class="no-preferred-store-message ng-binding">No Store Selected</p>
            <p id="waitTimeDivider" ng-class="{'-store-selected' : preferredStoreId != ''}" class="divider -wait-time">|</p>
            <div ng-class="{'-no-selected-store' : preferredStoreId == ''}" class="preferred-store-drawer-store-links -no-selected-store">
              <a class="change-store-link ng-hide" data-qa="navigation change store link" ng-show="isPreferredStoreSet()" ng-click="openChangeStoreDrawer()" href=""><span class="ng-binding">Change Store</span></a>
              <a class="change-store-link" data-qa="navigation select store link" ng-hide="isPreferredStoreSet()" ng-click="openChangeStoreDrawer()" href=""><span class="ng-binding">Select Store</span></a>
              <p class="divider">|</p>
              <a class="find-store-link" ng-click="trackFindStoreLink()" href="/storeLocator?hash=findStoreLink"><span class="ng-binding"> Find a Store </span></a>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div id="previewContextContainer" class="slot">
</div>
      </div>
      <div id="searchContainer" class="slot">
  <script>/*<![CDATA[*/
requireQ(["everything"], function() {
  common.register('melange.gadgets.search',
      melange.gadgets.search = function ($rootScope, $scope, $window, EnvLookup, windowSize, $location, $timeout, locationService) {


        var searchPath = '/searching';

        $scope.searchPlaceholderText = function(){
          if(windowSize.respondSmall()){
            return "Search"
          } else {
            return "What are you looking for today?";
          }
        };

        $scope.query = '';
        $scope.isLittleClinic = EnvLookup.bannerName === 'TheLittleClinic';

        $scope.toggleSearchDrawer = function () {
          if (!$scope.showSearchDrawer) {
            Beacon.registerMobileSearchIconClicked();
          }
          $rootScope.$broadcast('closeStoreReminder');
          $rootScope.$broadcast('headerDrawerWasToggled', 'searchDrawer');
          $scope.showSearchDrawer = !$scope.showSearchDrawer;
        };

        $rootScope.$on('searchTermChanged', function(e, searchQuery) {
          $scope.query = searchQuery;
        });

        $scope.$on('headerDrawerWasToggled', function (e, drawerName) {
          if (drawerName != 'searchDrawer') {
            $scope.showSearchDrawer = false;
          }
        });

        $scope.closeReminder = function () {
          $rootScope.$broadcast('closeStoreReminder');
        };

        $scope.find = function ($event) {
          if($event.currentTarget[0] && $event.currentTarget[0].nodeName === "INPUT") {
            $timeout(function() {
              $event.currentTarget[0].blur();
            });
          }
          redirectToSearch();
        };

        var redirectToSearch = function() {
          if($scope.query !== '') {
            var locationPath = locationService.locationPath();
            if (locationPath == searchPath) {
              $location.search({query: $scope.query});
            } else {
              $window.location.href = searchPath + '#?query=' + encodeURIComponent($scope.query) + '&contextUrl=' + encodeURIComponent(locationPath);
            }
          }
        };
      });

      melange.controller('melange.gadgets.searchGadgetController',
      ['$rootScope', '$scope', '$window', "EnvLookup", 'windowSize', '$location', '$timeout','locationService', melange.gadgets.search]);
});
/*]]>*/
</script>
  <div>
    <div ng-controller="melange.gadgets.searchGadgetController" class="search-container ng-scope">
      <form search-and-account-name-layout="" id="search" name="search" role="search" ng-submit="find($event)" data-qa="search gadget mobile drawer" class="ng-pristine ng-valid" style="margin-right: 189.375px;">
        <div class="search-wrapper">
          <input class="non-fm-search-input ng-pristine ng-valid" type="text" name="query" ng-click="closeReminder()" ng-keydown="closeReminder()" placeholder="What are you looking for today?" ng-model="query" ng-focus="searchFocus=true;" ng-blur="searchFocus=false;" data-qa="header search input">
          <button type="submit" data-qa="search gadget submit" ng-focus="find($event)" ng-style="{ 'background-color': query ? '#cccccc' : 'clear' }">Search</button>
        </div>
      </form>
      <div pinned-list="" phone-mode="true" ng-class="{ '-minimized': searchFocus }" class="ng-isolate-scope"><!-- ngIf: isEnabled --></div>
    </div>
  </div>
</div>

      <div class="authContainer">
        <div id="signInContainer" ng-show="bannerIsAuthenticated" class="slot">
  <script>/*<![CDATA[*/
requireQ(["everything"], function () {
  common.register('melange.gadgets.signIn', function () {
    return function ($rootScope, $scope, $window, $http, StoreFunctions, PromotionProgramService, Beacon, RedirectService, UrlUtilitiesService, EnvLookup, customerProfileService, timeoutService, windowSize) {
      var rememberMeEmail = window.localEnvironment.signIn.rememberMeEmail;
      var rememberMeOption = window.localEnvironment.signIn.rememberMeOption;
      $scope.responsiveEnabled = windowSize.responsiveEnabled();
      var homeShopBaseUrl = EnvLookup.homeShopBaseUrl;
      var isHomeShopPickStoreServiceIntegrationEnabled = EnvLookup.homeShopPickStoreServiceIntegrationEnabled;
      var signInPrompts = {
        myRecipes: 'Please log in to view My Recipes.',
        favorite: 'Please log in to save recipes.',
        shoppingList: 'Please log in to add ingredients to your Shopping List.',
        defaultPrompt: 'Sign in to view your account information.',
        rating:'Please log in to rate recipes.',
        productsList:'Sign in to add products to your list.'
      };
      var psc = EnvLookup.pscUrl.replace("/", "");
      var redirectUrl = RedirectService.requestHasRedirectUrl() ? RedirectService.getParameterByName('redirectUrl').replace('/', '') : "";
      var pathName = $window.location.pathname.substring($window.location.pathname.lastIndexOf('/') + 1);
      var action = $scope.action;
      signInPrompts[psc] = 'To view your Savings Center for coupons, sale items and more, please sign in.';

      $scope.pscCreateAccountPrompt = redirectUrl == psc || pathName == psc || action == psc;
      $scope.defaultCreateAccountPrompt = !$scope.pscCreateAccountPrompt;

      var redirectBasedSignInPrompt = function () {
        return RedirectService.requestHasRedirectUrl() ? signInPrompts[ RedirectService.getParameterByName('redirectUrl').replace('/', '')] : "";
      };

      var urlBasedSignInPrompt = function() {
        var url = $window.location.pathname;
        var pathname= url.substring(url.lastIndexOf('/') + 1);
        return signInPrompts[pathname];
      };

      var actionBasedSignInPrompt = function(){
        var actionBasedPrompt = $scope.action && signInPrompts[$scope.action];
        return actionBasedPrompt ? actionBasedPrompt : "";
      };

      $scope.signInPrompt = function() {
        var urlOrDefaultPrompt = urlBasedSignInPrompt() ? urlBasedSignInPrompt() : signInPrompts.defaultPrompt;
        if (actionBasedSignInPrompt()) {
          return actionBasedSignInPrompt();
        } else {
          return redirectBasedSignInPrompt() ? redirectBasedSignInPrompt() : urlOrDefaultPrompt;
        }
      };

      var init = function () {
        var userEmail = "";
        if (RedirectService.cookieEnabled()) {
          userEmail = localStorage.getItem("userEmail");
          timeoutService.timeout(function () {
            localStorage.removeItem("userEmail");
          }, 400);
        }

        $scope.account = { email: (_.isNull(userEmail) ? rememberMeEmail :
          userEmail), password: "", rememberMe: rememberMeOption };

        var href = $window.location.href;
        $scope.isHomeShop = $window.location.href.indexOf(homeShopBaseUrl) > -1;
        $scope.redirectUrlContains = function(token){
          if(RedirectService.requestHasRedirectUrl()){
            return token.indexOf(RedirectService.getParameterByName('redirectUrl')) >= 0;
          }
          return false;
        }
        $scope.showSignIn =
          ( href.indexOf('/#login') >= 0 || href.indexOf('/#/login') >= 0 ) ? true : false;
        $scope.isLoginError = false;
        $scope.isServiceError = false;
        $scope.emailErrorText = "";
        $("#emailError, #formEmailError").empty();
        $scope.passwordErrorText = "";
        $("#passwordError, #formPasswordError").empty();
        $scope.isLocked = false;
        $scope.isValidProgram = true;
        var queryParams = UrlUtilitiesService.getQueryParams();
        $scope.programName = queryParams.program;
        $scope.isEmailPreferenceError = queryParams.errorCode === "emailPreferenceNotSet";
        $scope.isSessionTimedOut = queryParams.errorCode === "sessionTimeout";

        var path = (!$scope.isHomeShop ? '/account/create' : homeShopBaseUrl + '/account/pickstore');
        if (RedirectService.requestHasRedirectUrl()) {
          path = path + '?' + RedirectService.getSearchString();
        }
        if (queryParams.program) {
          path = path + '?program=' + queryParams.program;
        }
        $scope.createAccountLink = path;

      };

      var hasErrors = function () {
        return  $scope.invalidEmailError || $scope.invalidPasswordError;
      };

      var validateEmail = function () {
        $scope.emailErrorText = undefined;
        var emailErrorText;
        if (_.isEmpty($scope.account.email)) {
          emailErrorText = 'Email is required';
          $scope.invalidEmailError = true;

        } else if (!$scope.isValidEmailPattern($scope.account.email)) {
          emailErrorText = 'Email format is incorrect';
          $scope.invalidEmailError = true;
        }
        if($scope.invalidEmailError){
          timeoutService.timeout(function(){
              $scope.emailErrorText = emailErrorText;
          }, 0);
        }
        return $scope.emailErrorText;
      };

      var validatePassword = function () {
        $scope.passwordErrorText = undefined;

        if (_.isEmpty($scope.account.password)) {
          $scope.invalidPasswordError = true;
          timeoutService.timeout(function(){
            $scope.passwordErrorText = 'Password is required';
          });
        }

        return $scope.passwordErrorText;
      };

      var isUserHomeShopCustomer = function (data) {
        if (isHomeShopPickStoreServiceIntegrationEnabled) {
          if (data.userProfile
            && data.userProfile.bannerSpecificDetails
            && data.userProfile.bannerSpecificDetails[0]
            ) {
            return !_.isEmpty(data.userProfile.bannerSpecificDetails[0].pickupStoreDivisionNumber &&
              !_.isEmpty(data.userProfile.bannerSpecificDetails[0].pickupStoreNumber))
          }
        }
        else {
          //if homeshop has set cookie, honor it...
          var homeShopCookieName = "isHomeShopCustomer";
          var updatedValue;
          if ($.cookie(homeShopCookieName) != null) {
            updatedValue = customerProfileService.updateHomeShopCustomer($.cookie(homeShopCookieName));
          } else { //default to false since no cookie found
            updatedValue = customerProfileService.updateHomeShopCustomer(false);
          }
          return updatedValue;
        }
      };

      var isUserEmailOptedIn = function (data) {
        if (data.userProfile
                && data.userProfile.bannerSpecificDetails
                && data.userProfile.bannerSpecificDetails[0]
            && data.userProfile.bannerSpecificDetails[0].userEmailPreferences
            ) {
          var userEmailPreferences = data.userProfile.bannerSpecificDetails[0].userEmailPreferences;
          for (var index in userEmailPreferences) {
            if (userEmailPreferences[index].selected) {
              return true;
            }
          }
        }
        return false;
      };
      //TODO remove this function
      var isUserHotOffersEligible = function (data) {
        if (data.userProfile
                && data.userProfile.bannerSpecificDetails
                && data.userProfile.bannerSpecificDetails[0]
            && data.userProfile.bannerSpecificDetails[0].userEmailPreferences
            ) {
          var userEmailPreferences = data.userProfile.bannerSpecificDetails[0].userEmailPreferences;
          var couponSpecialPromotionsEmailPreferenceId = EnvLookup.couponSpecialPromotionsEmailPreferenceId;

          for (var index in userEmailPreferences) {
            if (userEmailPreferences[index].selected == true
                    && _.has(userEmailPreferences[index], "preferenceType")
                    && userEmailPreferences[index].preferenceType.indexOf("extras") > -1
                && userEmailPreferences[index].id == couponSpecialPromotionsEmailPreferenceId) {
              return true;
            }
          }
        }
        return false;
      };

      $scope.cancel = function () {
        Beacon.registerSignInCanceled();
        if ($scope.showSignIn) {
          $scope.showSignIn = false;
          return;
        }
        if (RedirectService.requestHasCancelUrl()) {
          $window.location.href = "/weeklyAd";
          return;
        }
        if (RedirectService.requestHasRedirectUrl()) {
          // for coupon redirect
          RedirectService.performRedirect();
        }
        else {
          $window.location.href = "/";
        }
      }

      $scope.$on('headerDrawerWasToggled', function (e, drawerName) {
        if (drawerName != 'signinDrawer') {
          $scope.showSignIn = false;
        }
      });

      $scope.registerRegisterTabClicked = function () {
        Beacon.registerRegisterTabClicked();
      };

      $scope.toggleDrawer = function () {
        $rootScope.$broadcast('closeStoreReminder');
        $rootScope.$broadcast('headerDrawerWasToggled', 'signinDrawer');
        if ($scope.showSignIn) {
          $scope.showSignIn = false;
        } else {
          init();
          Beacon.registerSignInClick();
          $scope.showSignIn = true;
          $scope.$broadcast('focusSigninEmailInput', "(min-width: 768px)");
          $window.scrollTo(0,0);
        }
      };

      function closeDrawer() {
        $scope.showSignIn = false;
      }

      $scope.$on('toggleAccountDrawer', closeDrawer);
      $scope.$on('toggleSearchDrawer', closeDrawer);
      $scope.$on('toggleStoreDrawer', closeDrawer);

      $scope.$on('signInEvent', function (event, data) {
        if(data) {
         $scope.action = data.action;
         $scope.customRedirecturl = data.redirectUrl;
        }
        $scope.showSignIn = true;
        $scope.$broadcast('focusSigninEmailInput');
        $window.scrollTo(0,0);
      });

      $scope.submitClass = function () {
        return !$scope.disableSignIn() ? "submit mobileButtonEnabled" :
            "submit mobileButtonDisabled";
      };

      $scope.disableSignIn = function () {
        return _.isEmpty($scope.account.email) || _.isEmpty($scope.account.password);
      };

      $scope.isValidEmailPattern = function (email) {
        var emailPattern = /^[_a-zA-Z0-9]+([\.-]?[a-zA-Z0-9_]+)*@[a-zA-Z0-9]+([\.-]?[a-zA-Z0-9]+)*\.[A-Za-z]{2,}/;
        return email.length <= 50 && emailPattern.test(email);
      };

      $scope.submitOnIE8 = function () {
        if (isIE() == 8) {
          $scope.submit();
        }

        function isIE() {
          var myNav = navigator.userAgent.toLowerCase();
          return (myNav.indexOf('msie') != -1) ? parseInt(myNav.split('msie')[1]) : false;
        }
      };

      var resetErrors= function () {
        $scope.isLocked = false;
        $scope.isValidationError = false;
        $scope.isLoginError = false;
        $scope.isEmailPreferenceError = false;
        $scope.isServiceError = false;
        $scope.isSessionTimedOut = false;
        $scope.invalidEmailError = false;
        $scope.invalidPasswordError = false;
      };

      $scope.submit = function () {

        $('input[ng-model]').trigger('input');
        var href, signInLocation = '';
        href = $window.location.href;
        if ($scope.showSignIn) {
          signInLocation = 'signInModal'
        } else {
          signInLocation = ($scope.isHomeShop ? 'homeShopSignInPage' : 'signInPage');
        }
        var rememberMeFlag = $scope.account.rememberMe ? 'rememberMe_true' : 'rememberMe_false';
        Beacon.registerSignInAttempt(signInLocation, rememberMeFlag);

        resetErrors();
        var emailError = validateEmail();
        var passwordError = validatePassword();
        if (!hasErrors()) {
          $http.post("/user/authenticate",
              {account: $scope.account, location: $window.location.hash}).success(function (data) {
                data.hasOwnProperty('store') ? StoreFunctions.makePreferredStore(data['store']) :
                    StoreFunctions.removePreferredStore();
                customerProfileService.updateRegisteredUser(true);
                customerProfileService.updateHomeShopCustomer(isUserHomeShopCustomer(data));
                customerProfileService.updateEmailOptInUser(isUserEmailOptedIn(data));
                customerProfileService.updateEmailHotOffersUser(isUserEmailOptedIn(data));

                if (data.hasOwnProperty('loyaltyCard')) {
                  if (data['loyaltyCard'].cardNumberOrAltId.length > 0) {
                    customerProfileService.updateLoyalMember(true);
                  } else {
                    customerProfileService.updateLoyalMember(false);
                  }
                }

                if (RedirectService.requestHasRedirectUrl()) {
                  Beacon.registerSignInSuccess(signInLocation, rememberMeFlag,
                      RedirectService.requestHasRedirectToExternalUrl());
                }
                else {
                  Beacon.registerSignInSuccess(signInLocation, rememberMeFlag);
                }

                if ("true" == EnvLookup.isHeartBleedEnabled) {
                  var momentLastChange = moment(data['userProfile']['dateLastPasswordChange']);
                  var momentPromptDate = moment(EnvLookup.changePasswordPromptDate, 'YYYY-MMM-DD');

                  var loginAttempts =
                      (_.isUndefined($.cookie("loginattempts")) ||
                       _.isEmpty($.cookie("loginattempts"))) ?
                          0 : $.cookie("loginattempts");

                  if ((momentLastChange.isBefore(momentPromptDate) &&
                       parseInt(loginAttempts) < parseInt(EnvLookup.noOfAllowedAttempts))) {
                    $.cookie("loginattempts", ++loginAttempts, {path: '/', expires: 730});
                    if (RedirectService.requestHasRedirectUrl()) {
                      $window.location.href = '/changePassword?redirectUrl=' +
                                              encodeURIComponent(RedirectService.getParameterByName('redirectUrl'));
                    } else {
                      $window.location.href = '/changePassword';
                    }
                  } else {
                    if (RedirectService.requestHasRedirectUrl()) {
                      timeoutService.timeout(function () { RedirectService.performRedirect(); }, 400);
                    }
                    else {
                      if ($scope.isHomeShop) {
                        $window.location.href = homeShopBaseUrl;
                        return;
                      }
                      $window.location.reload(true);
                    }
                  }
                } else {
                  if (RedirectService.requestHasRedirectUrl()) {
                    timeoutService.timeout(function () { RedirectService.performRedirect(); }, 400);
                  }
                  else {
                    if ($scope.isHomeShop) {
                      $window.location.href = homeShopBaseUrl;
                      return;
                    }

                    if ($scope.customRedirecturl) {
                      $window.location.href = $scope.customRedirecturl;
                    }

                    $window.location.reload(true);
                  }
                }
              }).error(function (data) {
                $scope.isLocked = data["isLocked"];
                $scope.isValidationError = data["isValidationError"];
                $scope.isLoginError = !($scope.isLocked) || $scope.isValidationError;
                if (data["isServiceError"]) {
                  $scope.isServiceError = data["isServiceError"];
                  $scope.correlationId = data["correlationId"];
                  $scope.errorTypeCode = data["errorTypeCode"];
                  $scope.isLoginError = false;
                } else {
                  $scope.isServiceError = false;
                }
                var errorMsg = [];
                var messages = {
                  "Account has been locked": $scope.isLocked,
                  "Login credentials wrong": $scope.isLoginError,
                  "Sign In Service Error": $scope.isServiceError,
                  "Email Preferences problem": $scope.isEmailPreferenceError
                };
                _.each(_.keys(messages),
                    function (message) {
                      if (messages[message]) {
                        errorMsg.push(message);
                      }
                    });
                var trackingMessage = errorMsg.join("|");
                if ( $scope.isServiceError ) {
                  Beacon.registerSignInFailure(rememberMeFlag, signInLocation, trackingMessage,
                    $scope.errorTypeCode + ":" + $scope.correlationId);
                } else {
                  Beacon.registerSignInFailure(rememberMeFlag, signInLocation, trackingMessage);
                }
                $scope.account.password = "";
              });
        } else {
          $scope.account.password = "";
          var errorMsg;
          if (!_.isUndefined(emailError) && !_.isUndefined(passwordError)) {
            errorMsg = emailError + '_' + passwordError;
          } else if (!_.isUndefined(emailError) && _.isUndefined(passwordError)) {
            errorMsg = emailError;
          } else if (_.isUndefined(emailError) && !_.isUndefined(passwordError)) {
            errorMsg = passwordError;
          }
          Beacon.registerSignInFailure(rememberMeFlag, signInLocation, errorMsg);
        }
      };
      init();
    };
  });

  melange.controller("signInController", [
    '$rootScope', '$scope', '$window', '$http', 'storeFunctions.Service',
    'promotionalPrograms.Service', 'beacon.Service', 'redirect.Service',
    'urlUtilities.Service', 'EnvLookup' , 'customerProfile.Service',
    'timeoutService', 'windowSize',
    melange.gadgets.signIn()
  ]);
});
/*]]>*/
</script>

  <div ng-controller="signInController" class="authenticationGadget ng-scope">

    <a href="javascript:void(0)" id="signIn" class="account-drawer-toggle drawer-toggle-hidden-label active" ng-click="toggleDrawer()" ng-class="{active: showSignIn}">Sign In</a>

    <div class="sign-in-drawer drawer-visible" ng-class="{'drawer-visible': showSignIn}">
     <div class="sign-in-drawer-tabs">
        <span class="sign-in-drawer-tab -active">Sign In</span>
        <a class="sign-in-drawer-tab" ng-click="registerRegisterTabClicked()" ng-href="/account/create" href="/account/create">Register</a>
     </div>
      <div aria-hidden="false" class="sign-in-drawer-heading">
        <h1>Sign In</h1>
        <a href="" class="sign-in-drawer-close" ng-click="toggleDrawer()" tabindex="0" aria-label="Close Sign in Section">
          <img src="/static/image/icon_close.ea09f0d0270d6d13.png" width="21" height="21" alt="">
        </a>
      </div>
      <div>

<form ng-submit="submit()" method="POST" ui-keypress="{13:'submitOnIE8()'}" class="signin-drawer-form cn-modal-content ng-valid ng-dirty" name="signInForm" id="signInForm" autocomplete="off" novalidate="novalidate">
  <div aria-hidden="false" aria-live="assertive">
    <p><i class="ng-binding">Sign in to view your account information.</i></p>

    <div role="alert" aria-live="assertive" ng-show="isEmailPreferenceError" class="section-error ng-hide" data-qa="signin-drawer-email-preference-error">
      <p>We're sorry, due to technical difficulties, your email preferences have not been set. Please sign in to your account and navigate to your Account Summary to reselect your email preferences.</p>
    </div>
    <div role="alert" aria-live="assertive" ng-show="isLoginError" class="section-error ng-hide" data-qa="signin-drawer-login-error">
      <p>There was a problem with the information that you entered. <br>Your login attempt was not successful.
      </p>
    </div>
    <div role="alert" aria-live="assertive" ng-show="isServiceError" class="section-error ng-hide" data-qa="signin-drawer-service-error">
      <p>We're sorry, an unexpected error occurred during your sign-in attempt. <br>Please try signing in again.
      </p>
    </div>
    <div role="alert" aria-live="assertive" ng-show="isLocked" class="section-error ng-hide" data-qa="signin-drawer-locked-error">
      <p> This account has been locked due to a problem with the information you entered. Please wait 30 minutes
        for the account to be unlocked and try again. Or, contact<a href="/ContactUs"> Customer Service</a> for help with your account.</p>
    </div>
    <div role="alert" aria-live="assertive" ng-show="isSessionTimedOut" class="section-error ng-hide">
      <p>To protect your privacy, you have been signed out due to inactivity. Please sign in again.</p>
    </div>

    <ul>
      <li class="signin-drawer-field-item">
        <label for="signin-drawer-email-address">Email Address:</label>
        <input type="email" id="signin-drawer-email-address" data-qa="signin-drawer-email-address" size="40" ng-model="account.email" set-focus="focusSigninEmailInput" ng-class="{'-field-error':emailErrorText}" remove-default-ng-validations="true" tabindex="0" class="ng-isolate-scope ng-valid ng-dirty">
        <div ng-show="emailErrorText" role="alert" aria-relevant="all" aria-live="polite" class="alert-error ng-hide" data-qa="signin-drawer-email-error-text">
          <p class="ng-binding"></p>
        </div>
      </li>
      <li class="signin-drawer-field-item">
        <label for="signin-drawer-password">Password:</label>
        <input type="password" id="signin-drawer-password" data-qa="signin-drawer-password" size="40" ng-model="account.password" ng-class="{'-field-error':passwordErrorText}" autocomplete="off" tabindex="0" class="ng-valid ng-dirty">
        <div ng-show="passwordErrorText" role="alert" aria-relevant="all" aria-live="polite" class="alert-error ng-hide" data-qa="signin-drawer-password-error-text">
          <p class="ng-binding"></p>
        </div>
      </li>
      <li class="field-item -checkbox -small-bottom-margin">
        <span class="field-item-input-wrapper"><input type="checkbox" id="signin-drawer-remember-me" name="rememberMe" size="40" ng-model="account.rememberMe" tabindex="0" class="ng-pristine ng-valid"></span>
        <label for="signin-drawer-remember-me" class="unbold">Remember Me</label>
      </li>
    </ul>
    <div class="sign-in-other-actions">
      <a href="/forgotPassword" tabindex="0">Forgot your password?</a>
      <p class="sign-in-drawer-create-account-link" ng-show="defaultCreateAccountPrompt">
        New to <span>King Soopers</span>? <a ng-href="/account/create" tabindex="0" href="/account/create"> Create an account</a>
      </p>
      <p class="sign-in-drawer-create-account-link ng-hide" ng-show="pscCreateAccountPrompt">
        Don't have a <span>KingSoopers.com</span> account? <a ng-href="/account/create" tabindex="0" href="/account/create"> Create an account</a> for access to your Savings Center and more.
      </p>
    </div>
    <div class="signin-drawer-field-item-buttons">
      <input id="signin-drawer-submit" data-qa="signin-drawer-submit" type="submit" value="Sign In" tabindex="0">
      <input type="button" id="signin-drawer-cancel" ng-click="cancel()" value="Cancel" class="cancelButton" tabindex="0">
    </div>
  </div>
</form>
</div>
    </div>
  </div>

</div>
        <div id="registrationContainer" ng-show="bannerIsAuthenticated" class="slot">

  <script type="text/javascript">
    requireQ(["everything"], function() {
      melange.controller('registration_identifier', [
        '$scope', '$window', 'beacon.Service', 'redirect.Service', 'EnvLookup',
        function ($scope, $window, Beacon, RedirectService, EnvLookup) {
          var pathName = window.location.href.split('/');
          var pageName = pathName[pathName.length - 1];
          var homeShopBaseUrl = EnvLookup.homeShopBaseUrl;
          var isHomeShop = $window.location.href.indexOf(homeShopBaseUrl) > -1;
          $scope.register = function () {
            var path = (!isHomeShop ? '/account/create' : homeShopBaseUrl + '/account/pickstore');
            Beacon.registerCreateAccountClick();
            $window.location.href = RedirectService.requestHasRedirectUrl() ?
                path + '?' + RedirectService.getSearchString() : path;
          }
        }
      ]);
    });
  </script>

  <div class="createAccountGadget ng-scope" ng-controller="registration_identifier">
    <span id="createAccountLabel" class="register">No Account?</span>
    <a id="createAccount" href="javascript:void(0)" ng-click="register()" class="register">Register</a>
  </div>
</div>
        <div id="waitTimeContainer" ng-show="showWaitTimeIndicator()" class="wait-time-display ng-hide">
          <div class="wait-time-header">
            Current Wait Time
          </div>
          <div class="wait-time-value">
            <div class="wait_time-text ng-binding"></div>
          </div>
        </div>
      </div>

      <div id="preferredStoreBelow" ng-show="isLittleClinic" class="ng-hide">
        <h4 data-qa="preferred store heading" class="ng-binding">My Store: </h4>
        <a data-qa="preferred store hours link" class="storeHoursLink ng-binding ng-hide" ng-hide="preferredStoreId == ''" ng-click="trackPreferredStoreClick()" href="" ng-bind-html="getPreferredStoreDetails() | trusted">No Store Selected</a>
        <span ng-show="preferredStoreId == ''" class="ng-binding">No Store Selected</span>
        <p ng-show="waitTime" class="wait-time-label ng-hide">
          <span class="wait-time-text ng-binding">Current Wait Time: </span>
        </p>
      </div>

      </div>
    </div>

    <div class="navbarNavigation navbarNav">
      <a href="/" ng-click="track()" class="brand">King Soopers</a>
      <div id="topNavigation" role="navigation" ng-class="{'-hidden-respond-small' : hideResponsiveNav }" class="slot topNavigation -hidden-respond-small">
      <script>/*<![CDATA[*/
requireQ(["everything"], function () {
  common.register('melange.gadgets.topNavigationGadget', function () {
    return function ($scope, $rootScope, Content, $compile, Beacon, Trackable, EnvLookup, CustomerProfileService,
                     $window, HackNavigationMarkup, windowSize) {
      var slot_content = $window.localEnvironment.topNavigation.slotContent;

      function init() {
        if (_.isEmpty(slot_content)) return;
        Content.query({id: slot_content}, function (data) {

          var templateHTML = angular.element(data[0].body);
          HackNavigationMarkup.hackIt(templateHTML);

          $compile(templateHTML)($scope, function (clonedElement) {
            $("#topNavigationInsertionPoint").append(clonedElement);
            $rootScope.$broadcast("topNavigationLoaded");
          });
        });
      }

      init();
    };
  });
  melange.controller('topNavigationController', ['$scope', '$rootScope', 'content.Service', '$compile', 'beacon.Service',
    'trackable.Service', 'EnvLookup', 'customerProfile.Service', '$window', 'hackNavigationMarkup.Service', 'windowSize',
    melange.gadgets.topNavigationGadget()]);
});
/*]]>*/
</script>
      <div id="topNavigationInsertionPoint" top-navigation-wrapper="true" class="-desktop"><ul class="first-level-nav ng-scope">
        <li ng-show="isVisible()" class="first-level-nav-item -has-child" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Departments" level="first" has-child="true"><a href="" bnr-href="" ng-click="click()"><span class="ng-binding">Departments</span></a><span class="ng-transclude">
        <ul id="departmentsList" class="second-level-nav ng-scope">
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="1-2-3 REWARDS Visa Card" href="/topic/1-2-3-rewards-visa-card" level="second" has-child="false"><a href="" bnr-href="/topic/1-2-3-rewards-visa-card" ng-click="click()"><span class="ng-binding">1-2-3 REWARDS Visa Card</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Visa Prepaid Debit Card" href="/topic/visa-prepaid-debit-card" level="second" has-child="false"><a href="" bnr-href="/topic/visa-prepaid-debit-card" ng-click="click()"><span class="ng-binding">Visa Prepaid Debit Card</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Adult Beverage" href="/topic/adult-beverage" level="second" has-child="false"><a href="" bnr-href="/topic/adult-beverage" ng-click="click()"><span class="ng-binding">Adult Beverage</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Books &amp; Movies" href="/topic/entertainment" level="second" has-child="false"><a href="" bnr-href="/topic/entertainment" ng-click="click()"><span class="ng-binding">Books &amp; Movies</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Deli &amp; Bakery" href="/topic/deli-and-bakery" level="second" has-child="false"><a href="" bnr-href="/topic/deli-and-bakery" ng-click="click()"><span class="ng-binding">Deli &amp; Bakery</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Fresh Produce" href="/topic/fresh-produce" level="second" has-child="false"><a href="" bnr-href="/topic/fresh-produce" ng-click="click()"><span class="ng-binding">Fresh Produce</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Fuel" href="/fuel" level="second" has-child="false"><a href="" bnr-href="/fuel" ng-click="click()"><span class="ng-binding">Fuel</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Health &amp; Beauty" href="/topic/health-and-beauty-care" level="second" has-child="false"><a href="" bnr-href="/topic/health-and-beauty-care" ng-click="click()"><span class="ng-binding">Health &amp; Beauty</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Health Matters" href="/topic/health-matters-2" level="second" has-child="false"><a href="" bnr-href="/topic/health-matters-2" ng-click="click()"><span class="ng-binding">Health Matters</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="In-Store Services" href="/topic/in-store-services" level="second" has-child="false"><a href="" bnr-href="/topic/in-store-services" ng-click="click()"><span class="ng-binding">In-Store Services</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Marketplace" href="/topic/kroger-marketplace" level="second" has-child="false"><a href="" bnr-href="/topic/kroger-marketplace" ng-click="click()"><span class="ng-binding">Marketplace</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Meat &amp; Seafood" href="/topic/meat-and-seafood" level="second" has-child="false"><a href="" bnr-href="/topic/meat-and-seafood" ng-click="click()"><span class="ng-binding">Meat &amp; Seafood</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Money Services" href="http://moneyservices.kingsoopers.com" level="second" has-child="false"><a href="" bnr-href="http://moneyservices.kingsoopers.com" ng-click="click()"><span class="ng-binding">Money Services</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Natural Foods" href="/topic/natural-foods" level="second" has-child="false"><a href="" bnr-href="/topic/natural-foods" ng-click="click()"><span class="ng-binding">Natural Foods</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="No-Contract Wireless" href="/topic/mobile-market" level="second" has-child="false"><a href="" bnr-href="/topic/mobile-market" ng-click="click()"><span class="ng-binding">No-Contract Wireless</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Our Brands" href="/topic/our-brands" level="second" has-child="false"><a href="" bnr-href="/topic/our-brands" ng-click="click()"><span class="ng-binding">Our Brands</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Pet Care" href="/pet" level="second" has-child="false"><a href="" bnr-href="/pet" ng-click="click()"><span class="ng-binding">Pet Care</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Pharmacy" href="/topic/pharmacy" level="second" has-child="false"><a href="" bnr-href="/topic/pharmacy" ng-click="click()"><span class="ng-binding">Pharmacy</span></a><span class="ng-transclude"></span></li>
        <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="The Little Clinic" href="http://www.thelittleclinic.com" level="second" has-child="false"><a href="" bnr-href="http://www.thelittleclinic.com" ng-click="click()"><span class="ng-binding">The Little Clinic</span></a><span class="ng-transclude"></span></li>
        </ul>
        
    </span></li><li ng-show="isVisible()" class="first-level-nav-item -has-child" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Savings" level="first" has-child="true"><a href="" bnr-href="" ng-click="click()"><span class="ng-binding">Savings</span></a><span class="ng-transclude">
        <ul id="wastosavelist" class="second-level-nav ng-scope">
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Savings Center" href="/mysavings" level="second" has-child="false"><a href="" bnr-href="/mysavings" ng-click="click()"><span class="ng-binding">Savings Center</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Digital Coupons" href="/coupons" level="second" has-child="false"><a href="" bnr-href="/coupons" ng-click="click()"><span class="ng-binding">Digital Coupons</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Weekly Ad" href="/weeklyAd" level="second" has-child="false"><a href="" bnr-href="/weeklyAd" ng-click="click()"><span class="ng-binding">Weekly Ad</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Fuel" href="/fuel" level="second" has-child="false"><a href="" bnr-href="/fuel" ng-click="click()"><span class="ng-binding">Fuel</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Promotions" href="/topic/promotions" level="second" has-child="false"><a href="" bnr-href="/topic/promotions" ng-click="click()"><span class="ng-binding">Promotions</span></a><span class="ng-transclude"></span></li>
        </ul>
        
    </span></li><li ng-show="isVisible()" class="first-level-nav-item -has-child" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Order Online" level="first" has-child="true"><a href="" bnr-href="" ng-click="click()"><span class="ng-binding">Order Online</span></a><span class="ng-transclude">
        <ul id="orderonlinelist" class="second-level-nav ng-scope">
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="New! Natural &amp; Organic Ship to Home" href="https://livenaturally.kingsoopers.com?cid=livenaturallyKS" level="second" has-child="false"><a href="" bnr-href="https://livenaturally.kingsoopers.com?cid=livenaturallyKS" ng-click="click()"><span class="ng-binding">New! Natural &amp; Organic Ship to Home</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Deli &amp; Bakery" href="/delibakery" level="second" has-child="false"><a href="" bnr-href="/delibakery" ng-click="click()"><span class="ng-binding">Deli &amp; Bakery</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Floral" href="http://ftdfloristsonline.com/kingsoopers1" level="second" has-child="false"><a href="" bnr-href="http://ftdfloristsonline.com/kingsoopers1" ng-click="click()"><span class="ng-binding">Floral</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Fred Meyer Jewelers" href="http://www.fredmeyerjewelers.com" level="second" has-child="false"><a href="" bnr-href="http://www.fredmeyerjewelers.com" ng-click="click()"><span class="ng-binding">Fred Meyer Jewelers</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Gift Card Mall" href="http://giftcards.kingsoopers.com" level="second" has-child="false"><a href="" bnr-href="http://giftcards.kingsoopers.com" ng-click="click()"><span class="ng-binding">Gift Card Mall</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="HomeShop" href="https://homeshop.kroger.com/sf/servlet/storefront" level="second" has-child="false"><a href="" bnr-href="https://homeshop.kroger.com/sf/servlet/storefront" ng-click="click()"><span class="ng-binding">HomeShop</span></a><span class="ng-transclude"></span></li>
        </ul>
        
    </span></li><li ng-show="isVisible()" class="first-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="My Prescriptions" href="/myprescriptions" level="first" has-child="false"><a href="" bnr-href="/myprescriptions" ng-click="click()"><span class="ng-binding">My Prescriptions</span></a><span class="ng-transclude"></span></li>
    
    <li ng-show="isVisible()" class="first-level-nav-item -has-child" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Explore" level="first" has-child="true"><a href="" bnr-href="" ng-click="click()"><span class="ng-binding">Explore</span></a><span class="ng-transclude">
        <ul id="explorelist" class="second-level-nav ng-scope">
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Discover Fresh" href="http://discoverfresh.kingsoopers.com" level="second" has-child="false"><a href="" bnr-href="http://discoverfresh.kingsoopers.com" ng-click="click()"><span class="ng-binding">Discover Fresh</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Recipes" href="/recipes" level="second" has-child="false"><a href="" bnr-href="/recipes" ng-click="click()"><span class="ng-binding">Recipes</span></a><span class="ng-transclude"></span></li>
            <li ng-show="isVisible()" class="second-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Inspired Gathering" href="http://kingsoopers.inspiredgathering.com" level="second" has-child="false"><a href="" bnr-href="http://kingsoopers.inspiredgathering.com" ng-click="click()"><span class="ng-binding">Inspired Gathering</span></a><span class="ng-transclude"></span></li>
        </ul>
    
    </span></li><li ng-show="isVisible()" class="first-level-nav-item" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Community" href="/community" level="first" has-child="false"><a href="" bnr-href="/community" ng-click="click()"><span class="ng-binding">Community</span></a><span class="ng-transclude"></span></li>
    
    <li ng-show="isVisible()" class="first-level-nav-item ng-hide" ng-class="{'-child-open' : childNavOpen, '-has-child' : hasChild}" nav-item="Feedback" href="" level="first" has-child="false" header-feedback="true"><a href="" bnr-href="" ng-click="click()"><span class="ng-binding">Feedback</span></a><span class="ng-transclude"></span></li>
    

    

</ul></div>
      <div ng-controller="topNavigationController" id="topNavigation" class="ng-scope">
        <div pinned-list="" phone-mode="false" class="ng-isolate-scope"><!-- ngIf: isEnabled --><span ng-if="isEnabled" class="ng-scope"><button data-qa="pinned list button" class="pinned-shopping-list-button" ng-class="{'-expanded':expanded}" ng-click="pinnedClick()" ng-show="ShoppingList.activeList"><span class="pinned-shopping-list-button-label ng-binding">Shopping List</span></button><!-- ngIf: !isMobile() && expanded --><!-- ngIf: isMobile() --></span><!-- end ngIf: isEnabled --></div>
      </div>
    </div>
      
    </div>
  </div>
</header></div>
      <div class="contentBox" id="contentBox" role="main">
        <section role="region" aria-label="Promotions" id="main">
    <script>/*<![CDATA[*/
requireQ(["everything"], function() {
  common.register('melange.gadgets.hero', function (slot_content) {
    return function ($scope, Content, Asset) {

      if (slot_content.length == 0) return;

      var heroCollection = slot_content[0];
      $scope.heroes = [];
      $scope.isMultiHeroContent = false;
      Content.query({id: _.map(heroCollection.ids, function (item) {
        return item.identifier;
      })}, function (data) {
        $scope.heroes = data || [];
        $scope.isMultiHeroContent = $scope.heroes.length > 1;
        $.each($scope.heroes, function (index, hero) {
          if (hero && hero.image) {
            Asset.get({id: hero.image}, function (metadata) {
              hero.imageMetadata = metadata;
              hero.learnMoreLink =
              (!_.isEmpty(hero.externalUrl) ? hero.externalUrl : '/topic/' + hero.slug);
            });
          }
        });
      });
    }
  });
});
/*]]>*/</script>
    <script>
      requireQ(["everything"], function() {
        melange.controller('main_identifier', [
          '$scope', 'content.Service', 'asset.Service',
              melange.gadgets.hero([{'ids':[{'weight':2.732,'banners':{'BakersPlus':{'divisions':{'615':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'CityMarket':{'divisions':{'620':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'Dillons':{'divisions':{'615':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'Food4Less':{'divisions':{'704':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'708':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true},'FoodsCo':{'divisions':{'701':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'FrysFood':{'divisions':{'660':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'Gerbes':{'divisions':{'615':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'JaycFoods':{'divisions':{'090':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'KingSoopers':{'divisions':{'620':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'Kroger':{'divisions':{'011':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'014':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'016':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'018':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'021':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'024':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'025':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'026':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'029':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'},'034':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true},'OwensMarket':{'divisions':{'021':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'PayLess':{'divisions':{'021':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'QFC':{'divisions':{'705':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'Ralphs':{'divisions':{'703':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'},'SmithsFoodAndDrug':{'divisions':{'706':{'weight':'0.23','endDate':'2015-08-22T23:59:59.999-04:00','startDate':'2015-08-09T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.23'}},'rules':{'and':[{'rule':'banners?.containsKey(bannerName)','weight':0.001},{'or':[{'and':[{'rule':'banners[bannerName]?.divisions?.containsKey(divisionNumber)','weight':'(banners[bannerName]?.divisions[divisionNumber]?.weight?:0.001).toDouble()'},{'rule':'((banners[bannerName]?.divisions[divisionNumber]?.startDate?:startDate)..(banners[bannerName]?.divisions[divisionNumber]?.endDate?:endDate)).containsWithinBounds(today)','weight':0.001}]},{'and':[{'rule':'banners[bannerName]?.allDivisionSelected','weight':'(banners[bannerName]?.weight?:0.001).toDouble()'},{'rule':'banners[bannerName].divisions.every{key,value-> ((value?.startDate?:startDate)..(value?.endDate?:endDate)).containsWithinBounds(today) }','weight':0.001}]}]},{'rule':'allowedLoginState == \'all\' || allowedLoginState == loggedIn.toString()','weight':0.5},{'rule':'allowedLoginStateShoppers == \'all\' || allowedLoginStateShoppers == hasLoyaltyCard.toString()','weight':0.5},{'rule':'userPreferredStore == \'all\' || userPreferredStore == hasPreferredStore.toString()','weight':0.5},{'rule':'registeredUser == \'all\' || registeredUser == isRegistered.toString()','weight':0.5},{'rule':'emailOptInUser == \'all\' || emailOptInUser == isEmailOptInUser.toString()','weight':0.5}]},'identifier':'54e782a684ae3911f183a108','allowedLoginState':'all','allowedLoginStateShoppers':'all','userPreferredStore':'all','registeredUser':'all','emailOptInUser':'all'},{'weight':2.532,'banners':{'BakersPlus':{'divisions':{'615':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'CityMarket':{'divisions':{'620':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'Dillons':{'divisions':{'615':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'Food4Less':{'divisions':{'704':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'708':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true},'FoodsCo':{'divisions':{'701':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'FrysFood':{'divisions':{'660':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'Gerbes':{'divisions':{'615':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'JaycFoods':{'divisions':{'090':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'KingSoopers':{'divisions':{'620':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'Kroger':{'divisions':{'011':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'014':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'016':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'018':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'021':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'024':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'025':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'026':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'029':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'034':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true},'OwensMarket':{'divisions':{'021':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'PayLess':{'divisions':{'021':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'QFC':{'divisions':{'705':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'Ralphs':{'divisions':{'703':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'},'SmithsFoodAndDrug':{'divisions':{'706':{'weight':'0.03','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.03'}},'rules':{'and':[{'rule':'banners?.containsKey(bannerName)','weight':0.001},{'or':[{'and':[{'rule':'banners[bannerName]?.divisions?.containsKey(divisionNumber)','weight':'(banners[bannerName]?.divisions[divisionNumber]?.weight?:0.001).toDouble()'},{'rule':'((banners[bannerName]?.divisions[divisionNumber]?.startDate?:startDate)..(banners[bannerName]?.divisions[divisionNumber]?.endDate?:endDate)).containsWithinBounds(today)','weight':0.001}]},{'and':[{'rule':'banners[bannerName]?.allDivisionSelected','weight':'(banners[bannerName]?.weight?:0.001).toDouble()'},{'rule':'banners[bannerName].divisions.every{key,value-> ((value?.startDate?:startDate)..(value?.endDate?:endDate)).containsWithinBounds(today) }','weight':0.001}]}]},{'rule':'allowedLoginState == \'all\' || allowedLoginState == loggedIn.toString()','weight':0.5},{'rule':'allowedLoginStateShoppers == \'all\' || allowedLoginStateShoppers == hasLoyaltyCard.toString()','weight':0.5},{'rule':'userPreferredStore == \'all\' || userPreferredStore == hasPreferredStore.toString()','weight':0.5},{'rule':'registeredUser == \'all\' || registeredUser == isRegistered.toString()','weight':0.5},{'rule':'emailOptInUser == \'all\' || emailOptInUser == isEmailOptInUser.toString()','weight':0.5}]},'identifier':'553a5aa684ae9584d382a34a','allowedLoginState':'all','allowedLoginStateShoppers':'all','userPreferredStore':'all','registeredUser':'all','emailOptInUser':'all'},{'weight':2.5220000000000002,'banners':{'KingSoopers':{'divisions':{'620':{'weight':'0.02','endDate':'2015-08-10T23:59:59.999-04:00','startDate':'2015-08-04T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.02'}},'rules':{'and':[{'rule':'banners?.containsKey(bannerName)','weight':0.001},{'or':[{'and':[{'rule':'banners[bannerName]?.divisions?.containsKey(divisionNumber)','weight':'(banners[bannerName]?.divisions[divisionNumber]?.weight?:0.001).toDouble()'},{'rule':'((banners[bannerName]?.divisions[divisionNumber]?.startDate?:startDate)..(banners[bannerName]?.divisions[divisionNumber]?.endDate?:endDate)).containsWithinBounds(today)','weight':0.001}]},{'and':[{'rule':'banners[bannerName]?.allDivisionSelected','weight':'(banners[bannerName]?.weight?:0.001).toDouble()'},{'rule':'banners[bannerName].divisions.every{key,value-> ((value?.startDate?:startDate)..(value?.endDate?:endDate)).containsWithinBounds(today) }','weight':0.001}]}]},{'rule':'allowedLoginState == \'all\' || allowedLoginState == loggedIn.toString()','weight':0.5},{'rule':'allowedLoginStateShoppers == \'all\' || allowedLoginStateShoppers == hasLoyaltyCard.toString()','weight':0.5},{'rule':'userPreferredStore == \'all\' || userPreferredStore == hasPreferredStore.toString()','weight':0.5},{'rule':'registeredUser == \'all\' || registeredUser == isRegistered.toString()','weight':0.5},{'rule':'emailOptInUser == \'all\' || emailOptInUser == isEmailOptInUser.toString()','weight':0.5}]},'identifier':'55b912c084ae44e038b43e6c','allowedLoginState':'all','allowedLoginStateShoppers':'all','userPreferredStore':'all','registeredUser':'all','emailOptInUser':'all'}]}] || [])
        ])
        ;
      });
    </script>
    <div ng-controller="main_identifier" class="ng-scope">
      <div id="heroGadget">
        <div id="hero" class="carousel slide ng-isolate-scope" hero-carousel-swipe="true" ng-swipe-left="swipeLeft()" ng-swipe-right="swipeRight()" heroes="heroes" tracking-name="hero">
  <div id="heroCarousel" class="carousel slide">
    <div id="heroMessage" class="offscreen" role="alert" aria-live="assertive" tabindex="-1"></div>
    <div ng-show="subtopicsWithHeroFrame().length &gt; 1" class="">
      <a class="left carousel-control" href="#heroCarousel" data-slide="prev" aria-label="Scroll Previous Promotion" ng-click="previous()" ng-focus="pauseRotator()"></a>
    </div>
    <div class="carousel-inner">
      <!-- ngRepeat: hero in subtopicsWithHeroFrame() --><div ng-repeat="hero in subtopicsWithHeroFrame()" ng-class="{item: true, active: $first}" class="ng-scope item active">
        <div class="hero">
          <div class="figure" ng-show="hero">

            <!-- ngIf: !responsiveEnabled -->

            <!-- ngIf: responsiveEnabled --><span ng-if="responsiveEnabled" ng-show="hero.imageMetadata.frames.homepageHero" class="ng-scope">
              <span class="responsive-image-container" ng-click="learnMore($index, hero.learnMoreLink, hero.heroPanelHeadline ? hero.heroPanelHeadline : hero.headline)">
                <span data-qa="hero carousel responsive image default" show-media-alt="" show-media-src="/asset/55c10eed84ae5c89ea8eb44b?data=1" show-media="(min-width: 1024px)" show-media-default="true" class="ng-isolate-scope"><img src="/asset/55c10eed84ae5c89ea8eb44b?data=1" alt=""></span>
                <span show-media-alt="" show-media-src="/asset/55c10eed84ae5c89ea8eb44d?data=1" show-media="(min-width: 780px) and (max-width: 1023px)" class="ng-isolate-scope"></span>
                <span show-media-alt="" show-media-src="/asset/55c10eed84ae5c89ea8eb44f?data=1" show-media="(min-width: 550px) and (max-width: 779px)" class="ng-isolate-scope"></span>
                <span show-media-alt="" show-media-src="/asset/55c10eed84ae5c89ea8eb451?data=1" show-media="(max-width: 549px)" class="ng-isolate-scope"></span>
              </span>
            </span><!-- end ngIf: responsiveEnabled -->

            <div class="heroframe-placeholder ng-hide" ng-hide="hero.imageMetadata.frames.homepageHero"></div>

            <div class="figcaption">
              <div id="heroDetails_0">
                <h1 class="ng-binding">Save on Our Family of Brands</h1>
                <div ng-bind-html="(hero.heroPanelRotatorText || hero.body) | truncate: 135 | markdown | trusted" class="ng-binding"><p>Discover the quality, affordable brands that make life a little easier and eating more delicious, all under one roof!</p></div>
              </div>
              <a class="learnMoreLink ng-binding" ng-click="learnMore($index, hero.learnMoreLink, hero.heroPanelHeadline ? hero.heroPanelHeadline : hero.headline)" href="">Learn More</a>
            </div>

          </div>
        </div>
      </div><!-- end ngRepeat: hero in subtopicsWithHeroFrame() --><div ng-repeat="hero in subtopicsWithHeroFrame()" ng-class="{item: true, active: $first}" class="ng-scope item">
        <div class="hero">
          <div class="figure" ng-show="hero">

            <!-- ngIf: !responsiveEnabled -->

            <!-- ngIf: responsiveEnabled --><span ng-if="responsiveEnabled" ng-show="hero.imageMetadata.frames.homepageHero" class="ng-scope">
              <span class="responsive-image-container" ng-click="learnMore($index, hero.learnMoreLink, hero.heroPanelHeadline ? hero.heroPanelHeadline : hero.headline)">
                <span data-qa="hero carousel responsive image default" show-media-alt="" show-media-src="/asset/553a584784ae9584d382a33c?data=1" show-media="(min-width: 1024px)" show-media-default="true" class="ng-isolate-scope"><img src="/asset/553a584784ae9584d382a33c?data=1" alt=""></span>
                <span show-media-alt="" show-media-src="/asset/553a584884ae9584d382a33e?data=1" show-media="(min-width: 780px) and (max-width: 1023px)" class="ng-isolate-scope"></span>
                <span show-media-alt="" show-media-src="/asset/553a584884ae9584d382a340?data=1" show-media="(min-width: 550px) and (max-width: 779px)" class="ng-isolate-scope"></span>
                <span show-media-alt="" show-media-src="/asset/553a584884ae9584d382a342?data=1" show-media="(max-width: 549px)" class="ng-isolate-scope"></span>
              </span>
            </span><!-- end ngIf: responsiveEnabled -->

            <div class="heroframe-placeholder ng-hide" ng-hide="hero.imageMetadata.frames.homepageHero"></div>

            <div class="figcaption">
              <div id="heroDetails_1">
                <h1 class="ng-binding">All Your Savings in One Place</h1>
                <div ng-bind-html="(hero.heroPanelRotatorText || hero.body) | truncate: 135 | markdown | trusted" class="ng-binding"><p>With your new King Soopers Savings Center, you can check out all your savings opportunities with just one click!</p></div>
              </div>
              <a class="learnMoreLink ng-binding" ng-click="learnMore($index, hero.learnMoreLink, hero.heroPanelHeadline ? hero.heroPanelHeadline : hero.headline)" href="">Visit Your Savings Center</a>
            </div>

          </div>
        </div>
      </div><!-- end ngRepeat: hero in subtopicsWithHeroFrame() --><div ng-repeat="hero in subtopicsWithHeroFrame()" ng-class="{item: true, active: $first}" class="ng-scope item">
        <div class="hero">
          <div class="figure" ng-show="hero">

            <!-- ngIf: !responsiveEnabled -->

            <!-- ngIf: responsiveEnabled --><span ng-if="responsiveEnabled" ng-show="hero.imageMetadata.frames.homepageHero" class="ng-scope">
              <span class="responsive-image-container" ng-click="learnMore($index, hero.learnMoreLink, hero.heroPanelHeadline ? hero.heroPanelHeadline : hero.headline)">
                <span data-qa="hero carousel responsive image default" show-media-alt="" show-media-src="/asset/55b9126984ae44e038b43e54?data=1" show-media="(min-width: 1024px)" show-media-default="true" class="ng-isolate-scope"><img src="/asset/55b9126984ae44e038b43e54?data=1" alt=""></span>
                <span show-media-alt="" show-media-src="/asset/55b9126a84ae44e038b43e58?data=1" show-media="(min-width: 780px) and (max-width: 1023px)" class="ng-isolate-scope"></span>
                <span show-media-alt="" show-media-src="/asset/55b9126a84ae44e038b43e5b?data=1" show-media="(min-width: 550px) and (max-width: 779px)" class="ng-isolate-scope"></span>
                <span show-media-alt="" show-media-src="/asset/55b9126b84ae44e038b43e5d?data=1" show-media="(max-width: 549px)" class="ng-isolate-scope"></span>
              </span>
            </span><!-- end ngIf: responsiveEnabled -->

            <div class="heroframe-placeholder ng-hide" ng-hide="hero.imageMetadata.frames.homepageHero"></div>

            <div class="figcaption">
              <div id="heroDetails_2">
                <h1 class="ng-binding">Online Only! 50% OFF Select Probiotics</h1>
                <div ng-bind-html="(hero.heroPanelRotatorText || hero.body) | truncate: 135 | markdown | trusted" class="ng-binding"><p>Plus get free 2-day shipping on orders of $35 or more. Offer valid through August 10, 2015.</p></div>
              </div>
              <a class="learnMoreLink ng-binding" ng-click="learnMore($index, hero.learnMoreLink, hero.heroPanelHeadline ? hero.heroPanelHeadline : hero.headline)" href="">Shop Now</a>
            </div>

          </div>
        </div>
      </div><!-- end ngRepeat: hero in subtopicsWithHeroFrame() -->
    </div>
    <div ng-show="subtopicsWithHeroFrame().length &gt; 1" class="">
      <a class="right carousel-control" href="#heroCarousel" data-slide="next" aria-label="Scroll Next Promotion" ng-click="next()"></a>
    </div>
    <div class="carousel-indicators-wrapper" ng-show="subtopicsWithHeroFrame().length &gt; 1">
      <ol class="carousel-indicators">
        <!-- ngRepeat: hero in subtopicsWithHeroFrame() --><li keyboard-click="" tabindex="0" data-target="#heroCarousel" data-slide-to="0" ng-class="{active:$first}" ng-repeat="hero in subtopicsWithHeroFrame()" ng-focus="pauseRotator()" aria-label="blank" class="ng-scope active"></li><!-- end ngRepeat: hero in subtopicsWithHeroFrame() --><li keyboard-click="" tabindex="0" data-target="#heroCarousel" data-slide-to="1" ng-class="{active:$first}" ng-repeat="hero in subtopicsWithHeroFrame()" ng-focus="pauseRotator()" aria-label="blank" class="ng-scope"></li><!-- end ngRepeat: hero in subtopicsWithHeroFrame() --><li keyboard-click="" tabindex="0" data-target="#heroCarousel" data-slide-to="2" ng-class="{active:$first}" ng-repeat="hero in subtopicsWithHeroFrame()" ng-focus="pauseRotator()" aria-label="blank" class="ng-scope"></li><!-- end ngRepeat: hero in subtopicsWithHeroFrame() -->
      </ol>
    </div>
  </div>
</div>
      </div>
    </div>
  </section>
        <div>
  <script>/*<![CDATA[*/

requireQ(["everything"], function() {
  common.register('melange.gadgets.servicesOffered', function () {

    return function ($scope, Content, Asset, $window, windowSize, Beacon) {
      $scope.backgroundColor = window.localEnvironment.servicesOffered.attributes;
      var slotContent = window.localEnvironment.servicesOffered.slotContent;
      $scope.services = [];
      $scope.index = 0;

      function getServices() {
        if (_.isEmpty(slotContent)) return;
        Content.query({id: slotContent}, function (data) {
          $scope.services = _.sortBy(data, function (service) {
            return service.order ? 1 / service.order.all : 0;
          });
          $.each($scope.services, function (index, item) {
            if (item.asset) {
              Asset.get({id: item.asset}, function (metadata) {
                item.imageMetadata = metadata;
              });
            }
          });
        });
      }

      $scope.trackServicesOffered = function (targetLink, elementName, index) {
        Beacon.registerServicesOfferedClick(targetLink, elementName, index);
      };

      $scope.currentServices = function () {
        var result = [];

        for (var i = 0; i < $scope.itemsPerPage && i < $scope.services.length; i++) {
          result.push($scope.services[(i + $scope.index) % $scope.services.length]);
        }
        return result;
      };

      // 07/01/15 bindMany doesn't work. removed id from html
      common.linkBinder.bindMany($scope.currentServices, 'a[data-id="service-offering"]', function(index, model) {
        $scope.trackServicesOffered(model.target, model.title, index + 1);
      });

      $scope.next = function () {
        $scope.index += $scope.itemsPerPage;
        $scope.index = $scope.index % $scope.services.length;
      };

      $scope.previous = function () {
        $scope.index -= $scope.itemsPerPage;
        if ($scope.index < 0)
          $scope.index = $scope.index + $scope.services.length;
      };

      $scope.resize = function () {
        $scope.index = 0;
        $scope.itemsPerPage = windowSize.rotatorColumnsForPage();
      };

      var init = function () {
        if (slotContent.length == 0) return;
        getServices();
        $scope.itemsPerPage = windowSize.rotatorColumnsForPage();
        windowSize.registerResizeCallback($scope.resize);
      };

      init();
    };
  });

  melange.controller("servicesOfferedController", [
    '$scope', 'content.Service', 'asset.Service', '$window', 'windowSize', 'beacon.Service',
    melange.gadgets.servicesOffered()
  ]);
});
/*]]>*/
</script>
  <div role="region" aria-label="Services Offered" aria-hidden="services.length &gt; 0" ng-controller="servicesOfferedController" ng-style="{'background-color' : backgroundColor}" class="servicesOffered ng-scope" ng-show="services.length &gt; 0">
      <div class="carousel slide feature-carousel">
    <button class="prev-button" aria-label="Scroll Previous Service" ng-click="previous()" ng-show="services.length &gt; itemsPerPage"></button>
    <ul class="slidingRotator services" services-offered-swipe="" ng-swipe-left="swipeLeft()" ng-swipe-right="swipeRight()" next="next()" previous="previous()">
      <!-- ngRepeat: service in currentServices() --><li class="services-offered-item ng-scope" ng-repeat="service in currentServices()">
        <a href="" ng-click="trackServicesOffered('https://livenaturally.kingsoopers.com?cid=livenaturallyKS', 'Ship to Home', '1')">
          <div class="services-offered-inner">
            <p class="services-offered-image">
              <img ng-src="/asset/5583302c84ae728d5920ef4c?data=1" alt="" src="/asset/5583302c84ae728d5920ef4c?data=1">
            </p>
            <div class="serviceOfferedText">
              <p data-id="service-offering-title" class="serviceOfferedTitle ng-binding">Ship to Home</p>
              <p data-id="service-offering-description" class="serviceOfferedContent ng-binding">New! Order natural &amp; organic items online.</p>
            </div>
          </div>
        </a>
      </li><!-- end ngRepeat: service in currentServices() --><li class="services-offered-item ng-scope" ng-repeat="service in currentServices()">
        <a href="" ng-click="trackServicesOffered('/list', 'Shopping List', '2')">
          <div class="services-offered-inner">
            <p class="services-offered-image">
              <img ng-src="/asset/5256e9d484ae0a19ad5f7a9f?data=1" alt="" src="/asset/5256e9d484ae0a19ad5f7a9f?data=1">
            </p>
            <div class="serviceOfferedText">
              <p data-id="service-offering-title" class="serviceOfferedTitle ng-binding">Shopping List</p>
              <p data-id="service-offering-description" class="serviceOfferedContent ng-binding">Build your shopping list online.</p>
            </div>
          </div>
        </a>
      </li><!-- end ngRepeat: service in currentServices() --><li class="services-offered-item ng-scope" ng-repeat="service in currentServices()">
        <a href="" ng-click="trackServicesOffered('/myprescriptions', 'Refills', '3')">
          <div class="services-offered-inner">
            <p class="services-offered-image">
              <img ng-src="/asset/521cf6fe84ae206ebc270506?data=1" alt="" src="/asset/521cf6fe84ae206ebc270506?data=1">
            </p>
            <div class="serviceOfferedText">
              <p data-id="service-offering-title" class="serviceOfferedTitle ng-binding">Refills</p>
              <p data-id="service-offering-description" class="serviceOfferedContent ng-binding">Manage your family's prescriptions online.</p>
            </div>
          </div>
        </a>
      </li><!-- end ngRepeat: service in currentServices() --><li class="services-offered-item ng-scope" ng-repeat="service in currentServices()">
        <a href="" ng-click="trackServicesOffered('/account/update', 'Account', '4')">
          <div class="services-offered-inner">
            <p class="services-offered-image">
              <img ng-src="/asset/5256ea0f84ae0a19ad5f7aa1?data=1" alt="" src="/asset/5256ea0f84ae0a19ad5f7aa1?data=1">
            </p>
            <div class="serviceOfferedText">
              <p data-id="service-offering-title" class="serviceOfferedTitle ng-binding">Account</p>
              <p data-id="service-offering-description" class="serviceOfferedContent ng-binding">View your fuel points and more.</p>
            </div>
          </div>
        </a>
      </li><!-- end ngRepeat: service in currentServices() --><li class="services-offered-item ng-scope" ng-repeat="service in currentServices()">
        <a href="" ng-click="trackServicesOffered('http://giftcards.kingsoopers.com', 'Gift Card Mall', '5')">
          <div class="services-offered-inner">
            <p class="services-offered-image">
              <img ng-src="/asset/521cf69084ae206ebc270502?data=1" alt="" src="/asset/521cf69084ae206ebc270502?data=1">
            </p>
            <div class="serviceOfferedText">
              <p data-id="service-offering-title" class="serviceOfferedTitle ng-binding">Gift Card Mall</p>
              <p data-id="service-offering-description" class="serviceOfferedContent ng-binding">Browse the Gift Card Mall online.</p>
            </div>
          </div>
        </a>
      </li><!-- end ngRepeat: service in currentServices() -->
    </ul>
    <button class="next-button" swipe="swipe" aria-label="Scroll Next Service" ng-click="next()" ng-show="services.length &gt; itemsPerPage"></button>
  </div>
  </div>
</div>

        <div role="region" aria-label="Savings and Coupons">
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script>/*<![CDATA[*/
requireQ(["everything"], function () {
melange.controller('dealsGadget', ['$scope', '$rootScope', '$window', 'EnvLookup', 'beacon.Service', melange.gadgets.dealsGadget = function ($scope, $rootScope, $window, EnvLookup, Beacon) {
  $scope.disableWeeklyAds = function(){
    return EnvLookup.bannerName === "FredMeyer" && !EnvLookup.isWeeklyAdsEnabledForFM;
  };

  $scope.weeklyAdsInitialized = false;
  $scope.couponsInitialized = false;
  $scope.couponPromotionsInitialized = false;
  var WEEKLY_ADS = "weeklyAds";
  var COUPONS = "coupons";
  var COUPON_PROMOTIONS = "couponPromotions";
  $scope.selectedTab = $scope.disableWeeklyAds() ? COUPONS: WEEKLY_ADS;
  $scope.fireTrackingEventForCouponsTab = !$scope.disableWeeklyAds();

  var init = function () {
    $scope.isCouponPromotionConfigured = EnvLookup.couponPromotion;
    $scope.couponPromotionTabName = EnvLookup.couponPromotionTabName;
    $scope.couponPromotionViewAllURL = EnvLookup.couponPromotionViewAllURL;
    $scope.isCouponPromotionsEnabled = EnvLookup.isCouponPromotionsEnabled;
  };

  $scope.getTabNum = function(){
    return ($scope.isCouponPromotionConfigured && $scope.isCouponPromotionsEnabled) ? "-three-tabs-full-width-on-small" : "-two-tabs-full-width-on-small";
  };

  $scope.switchToCoupons = function() {
    $scope.selectedTab = COUPONS;
    $rootScope.$broadcast('deals.switchedTo', 'coupons', true);
  };

  $scope.switchToCouponPromotions = function() {
    $scope.selectedTab = COUPON_PROMOTIONS;
    $rootScope.$broadcast('deals.switchedTo', 'couponPromotions');
  };

  $scope.switchToWeeklyAds = function() {
    $scope.selectedTab = WEEKLY_ADS;
    $rootScope.$broadcast( 'deals.switchedTo', 'weeklyAd');
  };

  $scope.showCoupons = function() {
    return $scope.couponsInitialized && $scope.selectedTab == COUPONS ;
  };

  $scope.showCouponsError = function() {
    return !$scope.couponsInitialized && $scope.selectedTab == COUPONS;
  };

  $scope.showCouponPromotions = function() {
    return $scope.couponPromotionsInitialized && $scope.selectedTab == COUPON_PROMOTIONS ;
  };

  $scope.showWeeklyAds = function() {
    return $scope.weeklyAdsInitialized && $scope.selectedTab == WEEKLY_ADS;
  };

  $scope.showWeeklyAdsError = function() {
    return !$scope.weeklyAdsInitialized && $scope.selectedTab == WEEKLY_ADS;
  };

  $scope.showAllWeeklyAds = function() {
    Beacon.registerShowAllClick('weekly ad widget', '/weeklyad');
  };

  $scope.showAllCoupons = function() {
    Beacon.registerShowAllClick('coupon widget', '/coupons');
  };

  $scope.showAllCouponPromotions = function() {
    Beacon.registerShowAllClick('coupon promotion', $scope.couponPromotionViewAllURL);
  };

  $scope.focusOnCoupons = function() {
    return $window.location.search == "?=Coupons" || EnvLookup.bannerName === "FredMeyer";
  };

  $scope.$on('deals.weeklyAdsInitialized', function () {
    $scope.weeklyAdsInitialized = true;
  });

  $scope.$on('deals.couponsInitialized', function () {
    $scope.couponsInitialized = true;
    if($scope.focusOnCoupons()){
      $scope.selectedTab = COUPONS;
      $rootScope.$broadcast( 'deals.switchedTo', 'coupons', $scope.fireTrackingEventForCouponsTab);
    }
  });

  $scope.$on('deals.couponPromotionsInitialized', function () {
    $scope.couponPromotionsInitialized = true;
    if($window.location.search == "?=CouponPromotions"){
      $scope.selectedTab = COUPON_PROMOTIONS;
      $rootScope.$broadcast( 'deals.switchedTo', 'couponPromotions');
    }
  });

  init();
}]);
});
/*]]>*/
</script>

<div class="deals-container ng-scope" ng-controller="dealsGadget">
  <ul id="deals" class="deals-tabs -two-tabs-full-width-on-small" ng-class="getTabNum()">
    <li id="weeklyAds" class="deals-tab active" ng-hide="disableWeeklyAds()" ng-class="{active: showWeeklyAds() || showWeeklyAdsError()}" ng-click="switchToWeeklyAds()">
      <a href="javascript:void(0);">Weekly Ad</a>
    </li>
    <li id="coupons" class="deals-tab" ng-class="{active: showCoupons() || showCouponsError()}" ng-click="switchToCoupons()">
      <a href="javascript:void(0);">Coupons</a>
    </li>
    <li id="couponPromotions" class="deals-tab ng-hide" ng-class="{active: showCouponPromotions()}" ng-show="isCouponPromotionConfigured &amp;&amp; isCouponPromotionsEnabled" ng-click="switchToCouponPromotions()">
      <a href="javascript:void(0);" class="ng-binding"></a>
    </li>
    <li class="view-all-link">
      <a ng-href="#" ng-click="showAllWeeklyAds()" class="dealsLink" ng-show="showWeeklyAds() || showWeeklyAdsError()" data-qa="view all ads" href="#">View All Weekly Ads</a>
      <a ng-href="#" ng-click="showAllCoupons()" class="dealsLink ng-hide" ng-show="showCoupons() || showCouponsError()" data-qa="view all coupons" href="#">View All Coupons</a>
      <a ng-href="#" ng-click="showAllCouponPromotions()" class="dealsLink ng-hide" ng-show="showCouponPromotions()" data-qa="view all promotions" href="#">View All</a>
    </li>
  </ul>

  <section id="weeklyAdsSection" ng-show="showWeeklyAds() &amp;&amp; !disableWeeklyAds()" ng-class="{noBottomPadding: showWeeklyAds() }" class="deals-section noBottomPadding">
  <script>/*<![CDATA[*/
requireQ(["everything"], function() {
  common.register('melange.gadgets.weeklyAds', function () {
    return function ($scope,
                     WeeklyAds,
                     DealsService,
                     $timeout,
                     $window,
                     ShoppingList,
                     $filter,
                     EnvLookup,
                     $rootScope,
                     windowSize,
                     Beacon) {

      var adsPerSlide = 5;
      var chunksToLoad = 2;
      var carouselEl;
      $scope.ads = [];
      $scope.visibleAds = [];
      $scope.adChunkIndexes = [];
      $scope.adsLoading = true;
      $scope.adsViewed = 0;
      $scope.loadError = false;
      $scope.isPreviousDisabled = true;
      $scope.isForwardDisabled = false;
      $scope.addToListEnabled = EnvLookup.isAddToListFromWeeklyAdGadgetEnabled;
      $scope.loggedIn = EnvLookup.loggedIn;
      $scope.currentPage = 0;

      $scope.preferredStoreSet = function () {
        return !_.isEmpty($.cookie("StoreCode"));
      };

      $scope.onNextSlide = function () {
        Beacon.registerWeeklyAdNavigationChange('next');
        getCarouselEl().off('slid').one('slid', function () {
          addVisibleAds(true);
          incrementChunksToLoad(true);
          syncCarouselState();
        });

        screenReaderMessage('You have scrolled to the right and have loaded new Weekly Ads.');
      };

      $scope.onPrevSlide = function () {
        Beacon.registerWeeklyAdNavigationChange('back');
        getCarouselEl().off('slid').one('slid', function () {
          syncCarouselState();
        });

        screenReaderMessage('You have scrolled to the left and have loaded new Weekly Ads.');
      };

      var screenReaderMessage = function (message) {
        $("#scrollMessage").empty();
        $("#scrollMessage").append('<div>'+message+'</div>');
        $timeout(function(){
          $("#scrollMessage").empty();
        }, 500);
      };

      $scope.getStarted = function () {
        Beacon.registerWeeklyAdGetStarted('get started');
        $window.location.href = '/storeLocator?hash=weeklyAd';
      };

      var syncCarouselState = function () {
        setCurrentPage();
        setButtonEnabledStates();
        $scope.$apply();
      };

      var setCurrentPage = function () {
        $scope.currentPage = getCarouselEl().data("bs.carousel").getActiveIndex();
      };

      var setButtonEnabledStates = function () {
        var totalPages = Math.ceil(_.flatten($scope.ads).length / adsPerSlide);
        $scope.isForwardDisabled = (totalPages - 1) == $scope.currentPage;
        $scope.isPreviousDisabled = $scope.currentPage == 0;
      };

      var getCarouselEl = function () {
        return carouselEl || $('#weeklyAdCarousel');
      };

      var incrementChunksToLoad = function (isNext) {
        if (getCurrentSlide(isNext) > (chunksToLoad - 1)) {
          chunksToLoad += 2;
        }
      };

      var addVisibleAds = function (isNext) {
        incrementChunksToLoad(isNext);
        var currentIndex = getCurrentSlide(true);
        var endIndexToLoad = (($scope.ads.length - 1) - (currentIndex + 2) > 0) ? currentIndex + 2 :
            currentIndex + 1;
        if ($scope.visibleAds.length <= chunksToLoad) {
          var newChunkArray = $scope.ads.slice(currentIndex + 1, endIndexToLoad);
          _.each(newChunkArray, function (chunk, index) {
            $scope.visibleAds.push(chunk)
          });
        }
      };

      var getCurrentSlide = function (isNext) {
        var index = carouselEl.find('.item.active').index();
        return isNext ? (index) : (index - 1);
      };

      if (windowSize.responsiveEnabled()) {
        windowSize.registerResizeCallback(function () {
          if ($scope.repaginateAdsForLayout(windowSize.rotatorColumnsForPage())) {
            carouselEl.find('.active').removeClass('active');
            carouselEl.find('.item:first-child').addClass('active');
            $scope.currentPage = 0;
            $scope.isPreviousDisabled = true;
            $scope.isForwardDisabled = Math.ceil(_.flatten($scope.ads).length / adsPerSlide) == 1;
          }
        });
      }

      $scope.repaginateAdsForLayout = function (newAdsPerSlide) {
        var oldAdsPerSlide = adsPerSlide;
        adsPerSlide = newAdsPerSlide;

        if (newAdsPerSlide != oldAdsPerSlide) {
          $scope.paginateAds([]);
          return true;
        }
      };

      $scope.paginateAds = function (ads) {
        var unchunkedAds = _.flatten($scope.ads).concat(ads);
        $scope.ads = [];
        $scope.visibleAds = [];
        $scope.adChunkIndexes = [];
        var chunksLoadedCount = 0;
        _.each(chunkArray(unchunkedAds, adsPerSlide), function (adChunk, index) {
          $scope.ads.push(adChunk);
          $scope.adChunkIndexes.push(index);

          if (chunksLoadedCount < chunksToLoad) {
            $scope.visibleAds.push(adChunk);
            chunksLoadedCount++;
          }
        });
      };

      $scope.onShowDetails = function (ad, showDetails, index, parentIndex) {
        var element;
        if (showDetails) {
          element = document.getElementById('hideDetails_' + parentIndex + '_' + (index-1));
          var productName = $filter('removeCDATATag')(ad.Title);
          Beacon.registerWeeklyAdViewDetails(productName, index);
        } else {
          element = document.getElementById('viewDetails_' + parentIndex + '_' + (index-1));
        }
        $timeout(function(){
          element.focus();
        });
      }

      $scope.addToList = function (ad) {
        var productName = $filter('removeCDATATag')(ad.Title);
        var krogerItem = buildKrogerItem(ad);
        var addToListSuccess = function(response) {
          showMessage(productName + " was successfully added to <a href=\"/list\">your shopping list</a>", "success");
          Beacon.registerWeeklyAdItemAddToList(productName, ad.CategoryId, "weekly ad widget");
        }

        var addToListFailure = function(error) {
          if(error.message === ShoppingList.AUTHENTICATION_TIMED_OUT || error.message === ShoppingList.NOT_LOGGED_IN){
            if(!$scope.loggedIn) {
              openSignInDrawer();
            } else {
              redirectToSignIn(error.redirecturl);
            }
          } else {
            showMessage("There was an error adding this item to your shopping list", "error");
            Beacon.registerWeeklyAdItemAddToList(productName, ad, "weekly ad widget");
          }
        }
        if ($scope.loggedIn) {
          ShoppingList.addItem(krogerItem).then(
              addToListSuccess,
              addToListFailure
          );

          } else {
              Beacon.registerWeeklyAdItemAddToList(productName, ad, "weekly ad widget");
              openSignInDrawer();
          }
      };

      $scope.$on('deals.switchedTo', function (e, id) {
        if (id != 'weeklyAd') return;
        Beacon.registerWeeklyAdNavigationChange('tab');
      });

      var showMessage = function(message, type){
        type = type || "warning";
        $rootScope.fadeoutFlashMessages = [
          { msgClass: type + "-msg", message: message }
        ];
      };

      var redirectToSignIn = function(redirecturl) {
        showMessage("You must be logged in to add items to your Shopping List.", "warning");
        var baseUrl = "//" + $window.location.host;
        $window.location.href = baseUrl + redirecturl;
      };

      var openSignInDrawer = function(){
        showMessage("You must be logged in to add items to your Shopping List.", "warning");
        $timeout(function() {
          $rootScope.$broadcast('signInEvent');
        }, 500);
      };

      var buildKrogerItem = function (wishabiItem) {
        return {
          displayName: $filter('removeCDATATag')(wishabiItem.Title),
          categoryId:wishabiItem.CategoryId,
          sourceMap: {'circular': wishabiItem.Id},
          smallImageFileUri: wishabiItem.ThumbnailFile,
          imageFileUri: wishabiItem.ImageFile,
          weeklyAdInfo:{
            startDate: wishabiItem.StartDate,
            endDate: wishabiItem.EndDate,
            priceString: wishabiItem.PriceString
          }
        };
      };

      var chunkArray = function (array, chunkSize) {
        var chunkedArray = [];
        if (array) {
          for (var i = 0; i < array.length; i += chunkSize) {
            chunkedArray.push(array.slice(i, i + chunkSize));
          }
        }
        return chunkedArray;
      };

      var init = function () {
        $scope.repaginateAdsForLayout(windowSize.rotatorColumnsForPage());
        $rootScope.$broadcast('deals.weeklyAdsInitialized');

        WeeklyAds.get(function (response) {
          $scope.paginateAds(response.Items);
          $scope.adsLoading = false;
          $scope.adsViewed = 5;
          carouselEl = $('#weeklyAdCarousel').carousel({interval: false});
        }, function () {
          $scope.ads = [];
          $scope.adsLoading = false;
          $scope.loadError = true;
        });
      };

      init();
    };
  });
});
/*]]>*/</script>
  <script>
    requireQ(["everything"], function() {
      melange.controller('weeklyAds_identifier', [
        '$scope', 'weeklyAds.Service', 'deals.Service', '$timeout', '$window',
        'ShoppingList', '$filter', 'EnvLookup',
        '$rootScope', 'windowSize', 'beacon.Service',
            melange.gadgets.weeklyAds(null || [])
      ]);
    });
  </script>

  <div ng-controller="weeklyAds_identifier" class="ng-scope">
    <div id="weeklyAdsTabContent">
      <div id="weeklyAdCarousel" class="carousel slide ng-hide" deals-carousel-swipe="true" ng-swipe-left="swipeLeft()" ng-swipe-right="swipeRight()" ng-show="ads.length &gt; 0">
        <div>
          <a class="left carousel-control" href="#weeklyAdCarousel" data-slide="prev" aria-label="Scroll Previous Weekly Ad Items" ng-disabled="isPreviousDisabled" ng-click="onPrevSlide()" tabindex="-1" disabled="disabled"></a>
        </div>
        <div class="carousel-inner">
          <!-- ngRepeat: (adChunkIndex, adChunk) in visibleAds track by $index -->
        </div>
        <div>
          <a class="right carousel-control" href="#weeklyAdCarousel" data-slide="next" aria-label="Scroll Next Weekly Ad Items" ng-disabled="isForwardDisabled" ng-click="onNextSlide()" tabindex="0"></a>
          <div id="scrollMessage" class="offscreen" role="alert" aria-live="assertive" tabindex="-1"></div>
        </div>
      </div>
      <div class="deals-section-error-panel -with-get-started-button" ng-show="(loadError || ads.length == 0)">
        <div id="dealsErrorSection" ng-show="(loadError || ads.length == 0) &amp;&amp; !adsLoading" class="deals-section-error-action" data-qa="weekly ad no store error">
          <h2>View Your Weekly Specials</h2>
          <p>Browse our online ad to see great weekly specials for your local store.</p>
          <a class="button" href="" ng-click="getStarted()" data-qa="weekly ad error get started button" aria-describedby="dealsErrorSection">Get Started</a>
        </div>
        <div class="deals-section-error-loading ng-hide" ng-show="adsLoading">Loading</div>
      </div>
    </div>
  </div>
</section>
  <section id="couponsSection" ng-show="showCoupons()" data-qa="coupon section" ng-class="{noBottomPadding: showCoupons() }" class="deals-section ng-hide">
  <script>/*<![CDATA[*/
requireQ(["everything"], function() {

  common.register('melange.gadgets.coupons', function () {

    return function ($scope, Coupons, DealsService, EnvLookup, $rootScope, $window, $timeout, windowSize, Beacon, UrlUtilities) {

      var couponsPerSlide = 5;
      var carouselEl;

      $scope.coupons = [];
      $scope.couponChunkIndexes = [];
      $scope.initialized = false;
      $scope.couponsLoading = true;
      $scope.isPreviousDisabled = true;
      $scope.isForwardDisabled = false;
      $scope.loggedIn = EnvLookup.loggedIn;
      $scope.pageIndex = 0;
      $scope.numberOfCoupons = true;
      $scope.activeIndex = 0;
      $scope.couponPromotionImageId = EnvLookup.couponPromotionImageId;
      $scope.currentPage = 0;

      var OMNITURE_NAME = 'coupon widget';

      $scope.hasFilterTag = function (promotion) {
        return  _.contains(promotion.filterTags, EnvLookup.couponPromotionFilterTag)
      };

      $scope.onNextSlide = function (loadingCouponToCard) {
        $scope.getCarouselEl().off('slid.deals').one('slid.deals', function () {
          if ($scope.numberOfCoupons) {
            loadMoreCoupons();
          }
          syncCarouselState();
        });
        if (loadingCouponToCard) return;
        Beacon.registerCarouselNavigationChange(OMNITURE_NAME, 'next');

        screenReaderMessage('You have scrolled to the right and have loaded new Coupons.');
      };

      $scope.onPrevSlide = function () {
        $scope.getCarouselEl().off('slid.deals').one('slid.deals', function () {
          syncCarouselState();
        });
        Beacon.registerCarouselNavigationChange(OMNITURE_NAME, 'back');

        screenReaderMessage('You have scrolled to the left and have loaded new Coupons.');
      };

      var screenReaderMessage = function (message) {
        $("#scrollCouponMessage").empty();
        $("#scrollCouponMessage").append('<div>'+message+'</div>');
        $timeout(function(){
          $("#scrollCouponMessage").empty();
        }, 500);
      };

      var syncCarouselState = function () {
        setCurrentPage();
        setButtonEnabledStates();
        $scope.$apply();
      };

      var setCurrentPage = function () {
        $scope.currentPage = $scope.getCarouselEl().data("bs.carousel").getActiveIndex();
      };

      var setButtonEnabledStates = function () {
        var totalCouponPages = Math.ceil(_.flatten($scope.coupons).length / couponsPerSlide);
        $scope.isForwardDisabled = (totalCouponPages - 1) == $scope.currentPage;
        $scope.isPreviousDisabled = $scope.currentPage == 0;
      };

      var disableNavigation = function() {
        $scope.isForwardDisabled = true;
        $scope.isPreviousDisabled = true;
      }

      $scope.getCarouselEl = function () {
        return carouselEl || $('#couponCarousel');
      };

      var getTotalVisibleCoupons = function () {
        try {
          var items = $scope.getCarouselEl().find('.active').find('.deal');
          if (items) return items.length;
        }
        catch (err) {
        }
        return 0;
      };

     var scrollToTopAndOpenSignInDrawer = function(actionWasTriggeredFromModal) {
        if (!actionWasTriggeredFromModal) {
          $rootScope.$broadcast('signInEvent');
          return;
        }
        $timeout(function() {
          $rootScope.$broadcast('signInEvent');
        }, 750);
      };

      $scope.loadToCard = function (coupon, index) {
        var actionWasTriggeredFromModal = $scope.showCouponModal;
        if($scope.showCouponModal) {
          $scope.closeCouponModal();
        }
        var totalShowing = getTotalVisibleCoupons();
        if($scope.loggedIn){
          hideCouponOperations(coupon, true);
          Coupons.addCoupon(coupon, function (couponResponse) {
            $scope.activeIndex = $scope.getCarouselEl().find('.item.active').index();
            $rootScope.$broadcast('couponLoadedToCard', coupon.id);
            $scope.onNextSlide(true);
            $scope.showCouponDetails = false;
            $scope.$root.fadeoutFlashMessages = [
              {"message": "The coupon was successfully loaded to your card.", "msgClass": "success-msg"}
            ];
            loadMoreCoupons();
            Beacon.registerLoadCouponToCardFromCarousel(coupon, index, totalShowing, OMNITURE_NAME,
              'load to card', true);
          }, function (error) {
            hideCouponOperations(coupon, false);
            if (error.status == 403) {
              UrlUtilities.logoutRedirectToLogin('sessionTimeout');
            } else if (error.data.errors && error.data.errors == "noPlusCardOrPreferredStore") {
              if (!$scope.hasLoyaltyCard) Beacon.registerAddCardForCoupon(OMNITURE_NAME, coupon.id,
                index);
              $window.location.href = '/account/update?returnUrl=Coupons';
            } else {
              $scope.showCouponDetails = false;
              var errorMessage = (error.data.errors == "serviceCallFailed") ?
                error.data.serviceMessage : "There was an error loading the coupon to your card.";
              $scope.$root.fadeoutFlashMessages = [
                {"message": errorMessage, "msgClass": "warning-msg"}
              ];
            }
          });
        } else {
          var actionWasTriggeredFromModal = $scope.showCouponModal;
          var totalShowing = getTotalVisibleCoupons();
          Beacon.registerLoadCouponToCardFromCarousel(coupon, index, totalShowing, OMNITURE_NAME,
            'sign in to load', false);
          if (!actionWasTriggeredFromModal) {
            $rootScope.$broadcast('signInEvent');
            return;
          }
          $timeout(function() {
            $rootScope.$broadcast('signInEvent');
          }, 750);
        }
      };

      var processLoadToCard =  function (coupon,index){

      };

      $scope.$on('couponLoadedToCard', function (e, couponId) {
        $scope.removeCouponFromCarousel(couponId);
      });

      var hideCouponOperations = function (coupon, shouldHide) {
        coupon.hideLoadToCard = shouldHide;
        coupon.hideViewDetails = shouldHide;
      };

      $scope.removeCouponFromCarousel = function (couponId) {
        var allCoupons = _.flatten($scope.coupons);
        allCoupons = _.filter(allCoupons, function (coupon) {
          return coupon.id !== couponId;
        });
        $scope.coupons = [];
        $scope.paginateCoupons(allCoupons);
      };

      $scope.loadCardText = function () {
        if (!$scope.loggedIn) {
          return 'Sign in to Load';
        }
        else if ($scope.loggedIn && $scope.hasLoyaltyCard) {
          return 'Load to Card';
        }
        else ($scope.loggedIn && !$scope.hasLoyaltyCard)
        return  'Add Card to Load';
      };

      var filterPredicate = function (item) {
        var shouldShow = true;
        if (hasFilteredTags(item) == true) {
          shouldShow = false;
        }
        return shouldShow;
      };

      var loadCoupons = function (pageIndex) {
        $scope.initialized = true;

        Coupons.get({pageIndex: pageIndex}, function (response) {
          if (_.has(response, 'hasLoyaltyCard')) $scope.hasLoyaltyCard = response['hasLoyaltyCard'];

          response.coupons = _.filter(response.coupons, filterPredicate);

          $scope.paginateCoupons(response.coupons);
          $scope.couponsLoading = false;
          $scope.numberOfCoupons = response.numberOfCoupons > 0;
          carouselEl = $('#couponCarousel').carousel({interval: false});
        }, function () {
          $scope.coupons = [];
          $scope.couponsLoading = false;
          $scope.loadError = true;
          $scope.numberOfCoupons = false;
        });
      };

      var hasFilteredTags = function (coupon) {
        var filteredTags = EnvLookup.couponSpecialPromotionsFilteredTags.split(',');
        var filteredTagsFound = false;
        if (coupon.hasOwnProperty("filterTags")) {
          if (coupon.filterTags.length > 0) {
            _.each(coupon.filterTags, function (couponFilterTag) {
              _.each(filteredTags, function (filterTag) {
                if (couponFilterTag == filterTag) {
                  filteredTagsFound = true;
                  return;
                }
              });
            });
          }
        }
        return filteredTagsFound;
      };
      var loadMoreCoupons = function () {
        if ($scope.currentPage >= $scope.couponChunkIndexes.length - 3) {
          $scope.pageIndex += 1;
          $scope.isForwardDisabled = true;
          Coupons.get({pageIndex: $scope.pageIndex}, function (response) {
            response.coupons = _.filter(response.coupons, filterPredicate);
            $scope.paginateCoupons(response.coupons);
            $scope.numberOfCoupons = response.numberOfCoupons > 0;
            $scope.isForwardDisabled = false;
          }, function (e) {
            $scope.loadError = true;
          });
        }
      };

      $scope.$on('deals.switchedTo', function (e, id, fireBeacon) {
        if (id != 'coupons') return;
        if (!$scope.initialized) {
          $scope.repaginateCouponsForLayout(windowSize.rotatorColumnsForPage());
          loadCoupons(0);

          if (windowSize.responsiveEnabled()) {
            windowSize.registerResizeCallback(function () {
              if ($scope.repaginateCouponsForLayout(windowSize.rotatorColumnsForPage())) {
                carouselEl.find('.active').removeClass('active');
                carouselEl.find('.item:first-child').addClass('active');
                $scope.currentPage = 0;
                $scope.isPreviousDisabled = true;
                $scope.isForwardDisabled =
                Math.ceil(_.flatten($scope.coupons).length / couponsPerSlide) == 1;
              }
            });
          }
        }
        if(fireBeacon) {
          Beacon.registerCarouselNavigationChange(OMNITURE_NAME, 'tab');
        }
      });

      $scope.repaginateCouponsForLayout = function (newCouponsPerSlide) {
        var oldCouponsPerSlide = couponsPerSlide;
        couponsPerSlide = newCouponsPerSlide;

        if (newCouponsPerSlide != oldCouponsPerSlide) {
          $scope.paginateCoupons([]);
          return true;
        }
      };

      $scope.paginateCoupons = function (coupons) {
        var unchunkedCoupons = _.flatten($scope.coupons).concat(coupons);
        $scope.coupons = [];
        $scope.couponChunkIndexes = [];
        _.each(chunkArray(unchunkedCoupons, couponsPerSlide), function (couponChunk, index) {
          $scope.coupons.push(couponChunk);
          $scope.couponChunkIndexes.push(index);
        });
      };

      var chunkArray = function (array, chunkSize) {
        var chunkedArray = [];
        if (array) {
          for (var i = 0; i < array.length; i += chunkSize) {
            chunkedArray.push(array.slice(i, i + chunkSize));
          }
        }
        return chunkedArray;
      };

      $scope.openCouponModal = function(coupon, index, parentIndex) {
        $scope.modalCoupon = coupon;
        $scope.modalCoupon.index = index;
        disableNavigation();
        $scope.showCouponModal = true;
        Beacon.registerCarouselViewDetails(OMNITURE_NAME, coupon.id, index);
        $scope.couponBodyId = "couponBody-" + parentIndex + "-" + (index - 1);
        $scope.focusTopOfModal();
      };

      $scope.closeCouponModal = function() {
        $scope.showCouponModal = false;
        $('.side-modal-scrollable-area').scrollTop(0); //manip dom in controller :(
        setButtonEnabledStates();
        $scope.focusClickedDetails();
      };

      $scope.focusClickedDetails = function() {
        $("#"+$scope.couponBodyId).parent().focus();
        $scope.couponBodyId = "";
      };

      $scope.focusTopOfModal = function () {
        $timeout(function() {
         $("#couponModalHeading").focus();
        }, 0, false);
      };

      $scope.focusBottomOfModal = function () {
        if($scope.modalHeadingFocus) {
          $timeout(function () {
            $("#couponModalCancel").focus();
          }, 0, false);
        }
      };

      var init = function () {
        $scope.repaginateCouponsForLayout(windowSize.rotatorColumnsForPage());
        $rootScope.$broadcast('deals.couponsInitialized');
      };

      init();
    };
  });

  melange.controller("couponsController", [
    '$scope', 'coupons.Service', 'deals.Service', 'EnvLookup', '$rootScope', '$window', '$timeout',
    'windowSize', 'beacon.Service', 'urlUtilities.Service', melange.gadgets.coupons()
  ]);
});
/*]]>*/</script>

  <div ng-controller="couponsController" class="ng-scope">
    <div id="couponsTabContent">
      <div id="couponCarousel" class="carousel slide scoped-to-banner ng-hide" deals-carousel-swipe="true" ng-swipe-left="swipeLeft()" ng-swipe-right="swipeRight()" ng-show="coupons.length &gt; 0 &amp;&amp; !loadError">
        <div side-modal="showCouponModal" id="couponModalHeading" data-qa="coupon side modal" aria-hidden="!showCouponModal" kr-shift-tab="focusBottomOfModal()" tabindex="-1" ng-focus="modalHeadingFocus=true;" ng-blur="modalHeadingFocus=false;" class="ng-isolate-scope -hidden side-modal">
          <div class="side-modal-window-shade"></div>
          <div class="side-modal-inner">
            <h1 class="side-modal-heading ng-binding" data-qa="coupon modal heading"></h1>
            <a class="side-modal-close-button" ng-click="closeCouponModal()" href="" data-qa="coupon modal close button" tabindex="-1">Close Coupon Details</a>

            <div class="side-modal-scrollable-area">
              <div class="coupon-modal-body">
                <img ng-hide="!modalCoupon.imageUrl" class="coupon-modal-body-image ng-hide" ng-src="">
                <div class="coupon-modal-body-text-heading ng-binding"></div>
                <div class="coupon-modal-body-text">
                  <div class="coupon-details ng-binding" data-qa="coupon details modal description"></div>
                  <br>
                  <div>Limit of one coupon per item. Digital Coupons and paper coupons may not be combined on the purchase
                    of a single item.</div>
                </div>
                <br>
              </div>
              <div class="coupon-modal-buttons">
              <button class="coupon-modal-load-coupon-button operation ng-binding" ng-click="loadToCard(modalCoupon, modalCoupon.index)" ng-hide="coupon.hideLoadToCard" tabindex="-1" data-qa="load coupon button modal">Sign in to Load</button>
              <button id="couponModalCancel" class="coupon-modal-cancel-button operation" ng-click="closeCouponModal()" ng-hide="coupon.hideLoadToCard" tabindex="-1" data-qa="cancel button coupon modal" value="Cancel" kr-tab="focusTopOfModal()">Cancel</button>
              </div>
            </div>
          </div>
        </div>
          <div>
              <a class="left carousel-control" href="#couponCarousel" data-slide="prev" aria-label="Scroll Previous Coupons" ng-disabled="isPreviousDisabled" ng-click="onPrevSlide()" tabindex="-1" disabled="disabled"></a>
          </div>
        <div class="carousel-inner">
          <!-- ngRepeat: (chunkIndex, couponChunkIndex) in couponChunkIndexes track by $index -->
        </div>
        <div>
          <a class="right carousel-control" href="#couponCarousel" data-slide="next" data-qa="coupon carousel right arrow button" aria-label="Scroll Next Coupons" ng-disabled="isForwardDisabled" ng-click="onNextSlide()" tabindex="0"></a>
        </div>
          <div id="scrollCouponMessage" class="offscreen" role="alert" aria-live="assertive" tabindex="-1"></div>
      </div>
      <div class="deals-section-error-panel -with-get-started-button" ng-show="(loadError || coupons.length == 0)">
        <div ng-show="(loadError || coupons.length == 0) &amp;&amp; !couponsLoading" class="deals-section-error-action ng-hide">
          <h2>We're sorry</h2>
          <p class="-coupon-get-started">There was a problem loading your coupons.
            Please click here to continue browsing all coupons.</p>
          <a class="button" href="/coupons">Get Started</a>
        </div>
        <div class="deals-section-error-loading" ng-show="couponsLoading">Loading</div>
      </div>
    </div>
  </div>
</section>

  <section id="couponPromotionsSection" ng-show="showCouponPromotions()" data-qa="couponPromotion section" ng-class="{noBottomPadding: showCouponPromotions() }" class="deals-section ng-hide">
  <script>/*<![CDATA[*/

requireQ(["everything"], function() {
  common.register('melange.gadgets.couponPromotions', function () {

    return function ($scope,
                     Promotions,
                     DealsService,
                     EnvLookup,
                     $rootScope,
                     $window,
                     $timeout,
                     windowSize,
                     Coupons,
                     AccountService,
                     Beacon,
                     UrlUtilities) {

      var promotionsPerSlide = 5;
      var carouselEl;

      $scope.promotions = [];
      $scope.promotionChunkIndexes = [];
      $scope.initialized = false;
      $scope.promotionLoading = true;
      $scope.isPreviousDisabled = true;
      $scope.isForwardDisabled = false;
      $scope.loggedIn = EnvLookup.loggedIn;
      $scope.pageIndex = 0;
      $scope.numberOfPromotions = true;
      $scope.activeIndex = 0;
      $scope.currentPage = 0;
      $scope.optedForMyExtras = false;
      $scope.optedForHotOffer = false;
      $scope.couponPromotionPublishedAs = EnvLookup.couponPromotionPublishedAs;
      $scope.couponPromotionViewAllURL = EnvLookup.couponPromotionViewAllURL;
      $scope.couponPromotionImageId = EnvLookup.couponPromotionImageId;
      $scope.couponPromotionMessageHeader = EnvLookup.couponPromotionMessageHeader;
      $scope.couponPromotionMessageText = EnvLookup.couponPromotionMessageText;
      $scope.couponPromotionButtonText = EnvLookup.couponPromotionButtonText;
      $scope.couponPromotionButtonAltId = EnvLookup.couponPromotionButtonAltId;
      $scope.couponPromotionButtonUrl = EnvLookup.couponPromotionButtonUrl;
      $scope.couponPromotionNotLoggedInMessageHeader =
      EnvLookup.couponPromotionNotLoggedInMessageHeader;
      $scope.couponPromotionNotLoggedInMessageText =
      EnvLookup.couponPromotionNotLoggedInMessageText;
      $scope.couponPromotionNotLoggedInButtonText = EnvLookup.couponPromotionNotLoggedInButtonText;
      $scope.couponPromotionNotLoggedInButtonAltId =
      EnvLookup.couponPromotionNotLoggedInButtonAltId;
      $scope.couponPromotionNotLoggedInButtonUrl = EnvLookup.couponPromotionNotLoggedInButtonUrl;

      $scope.isMyExtras = ($scope.couponPromotionPublishedAs == 'myextras') ? true : false;
      $scope.isHotOffer = $scope.isMyExtras && (EnvLookup.couponPromotionFilterTag ==
                                                EnvLookup.couponSpecialPromotionsFilteredTags) ?
          true : false;

      var OMNITURE_NAME = 'coupon promotion';

      $scope.onNextSlide = function (loadingCouponToCard) {
        getCarouselEl().off('slid').one('slid', function () {
          if ($scope.numberOfPromotions) {
            $scope.pageIndex += 1;
          }
          syncCarouselState();
        });
        screenReaderMessage("You scrolled to the right and loaded new promotions.", "assertive");
        if (loadingCouponToCard) return;
        Beacon.registerCarouselNavigationChange(OMNITURE_NAME, 'next');
      };

      $scope.onPrevSlide = function () {
        getCarouselEl().off('slid').one('slid', function () {
          syncCarouselState();
        });
        screenReaderMessage("You scrolled to the left and loaded new promotions.", "assertive");
        Beacon.registerCarouselNavigationChange(OMNITURE_NAME, 'back');
      };

      var screenReaderMessage = function(message, alertLevel) {
        $timeout(function() {
          $scope.alertLevel = alertLevel;
          $scope.ariaScrollText = message;
        }, 0);
        $timeout(function() {
          $scope.alertLevel = "assertive";
          $scope.ariaScrollText = "";
        }, 500);
      };

      $scope.onShowDetails = function (promotion, showDetails, index) {
        if (showDetails) {
          Beacon.registerCarouselViewDetails(OMNITURE_NAME, promotion.id, index);
          screenReaderMessage(promotion.shortDescription + ". " + promotion.requirementDescription
            + ". Limit of one coupon per item. Digital Coupons and paper coupons may not be combined on the purchase of a single item." , "polite");
        }
      }

      var syncCarouselState = function () {
        setCurrentPage();
        setButtonEnabledStates();
        $scope.$apply();
      };

      var setCurrentPage = function () {
        $scope.currentPage = getCarouselEl().data("bs.carousel").getActiveIndex();
      };

      var setButtonEnabledStates = function () {
        var totalPages = Math.ceil(_.flatten($scope.promotions).length / promotionsPerSlide);
        $scope.isForwardDisabled = (totalPages - 1) == $scope.currentPage;
        $scope.isPreviousDisabled = $scope.currentPage == 0;
      };

      var getCarouselEl = function () {
        return carouselEl || $('#promotionCarousel');
      };

      $scope.hasFilterTag = function (promotion) {
        return  _.contains(promotion.filterTags, EnvLookup.couponPromotionFilterTag);
      };

      var disablePreviousNextOnLoad = function () {
        if (_.flatten($scope.promotions).length <= promotionsPerSlide) {
          $scope.isForwardDisabled = true;
          $scope.isPreviousDisabled = true;
        }
      }

      var getTotalVisibleCoupons = function () {
        try {
          var items = getCarouselEl().find('.active').find('.deal');
          if (items) return items.length;
        }
        catch (err) {
        }
        return 0;
      };

      $scope.loadToCard = function (coupon, index) {
        var totalShowing = getTotalVisibleCoupons();
        if($scope.loggedIn){
          hideCouponOperations(coupon, true);
          Coupons.addCoupon(coupon, function (couponResponse) {
            $scope.activeIndex = getCarouselEl().find('.item.active').index();
            $rootScope.$broadcast('couponLoadedToCard', coupon.id);
            $scope.onNextSlide(true);
            $scope.showCouponDetails = false;
            $scope.$root.fadeoutFlashMessages = [
              {"message": "The coupon was successfully loaded to your card.", "msgClass": "success-msg"}
            ];
            Beacon.registerLoadCouponToCardFromCarousel(coupon, index, totalShowing, OMNITURE_NAME,
              'load to card', true);

          }, function (error) {
            hideCouponOperations(coupon, false);
            if (error.status == 403) {
              UrlUtilities.logoutRedirectToLogin('sessionTimeout');
            } else if (error.data.errors && error.data.errors == "noPlusCardOrPreferredStore") {
              if (!$scope.hasLoyaltyCard) Beacon.registerAddCardForCoupon(OMNITURE_NAME, coupon.id,
                index);
              $window.location.href = '/account/update?returnUrl=CouponPromotions';
            } else {
              $scope.showCouponDetails = false;
              var errorMessage = (error.data.errors == "serviceCallFailed") ?
                error.data.serviceMessage : "There was an error loading the coupon to your card.";
              $scope.$root.fadeoutFlashMessages = [
                {"message": errorMessage, "msgClass": "warning-msg"}
              ];
            }
          });
        } else {
          $rootScope.$broadcast('signInEvent');
          Beacon.registerLoadCouponToCardFromCarousel(coupon, index, totalShowing, OMNITURE_NAME,
            'sign in to load', false);
        }
      };

      $scope.$on('couponLoadedToCard', function (e, couponId) {
        $scope.removeCouponFromCarousel(couponId);
      });

      var hideCouponOperations = function (coupon, shouldHide) {
        coupon.hideLoadToCard = shouldHide;
        coupon.hideViewDetails = shouldHide;
      };

      $scope.removeCouponFromCarousel = function (couponId) {
        var allCoupons = _.flatten($scope.promotions);
        allCoupons = _.filter(allCoupons, function (coupon) {
          return coupon.id !== couponId;
        });
        $scope.promotions = [];
        $scope.paginatePromotions(allCoupons);
      };

      $scope.loadCardText = function () {
        if (!$scope.loggedIn) {
          return 'Sign in to Load';
        }
        else if ($scope.loggedIn && $scope.hasLoyaltyCard) {
          return 'Load to Card';
        } else ($scope.loggedIn && !$scope.hasLoyaltyCard)
        return  'Add Card to Load';
      };

      var loadPromotions = function () {
        $scope.initialized = true;
        $scope.promotionsLoading = true;

        Promotions.get({filterTag: EnvLookup.couponPromotionFilterTag, isMyExtras: $scope.isMyExtras, optedForMyExtras: $scope.optedForMyExtras,
          isHotOffer: $scope.isHotOffer, optedForHotOffer: $scope.optedForHotOffer},
            function (response) {
              if (_.has(response, 'hasLoyaltyCard')) $scope.hasLoyaltyCard =
                                                     response['hasLoyaltyCard'];
              $scope.paginatePromotions(response.promotions);
              $scope.promotionsLoading = false;
              $scope.numberOfPromotions = response.numberOfPromotions > 0 ? true : false;
              carouselEl = $('#promotionCarousel').carousel({interval: false});
              disablePreviousNextOnLoad();
            }, function () {
              $scope.promotions = [];
              $scope.promotionsLoading = false;
              $scope.loadError = true;
              $scope.numberOfPromotions = false;
            });
      };

      $scope.$on('deals.switchedTo', function (e, id) {
        if (id != 'couponPromotions') return;
        if (!$scope.initialized) {
          $scope.repaginatePromotionsForLayout(windowSize.rotatorColumnsForPage());
          loadPromotions();

          if (windowSize.responsiveEnabled()) {
            windowSize.registerResizeCallback(function () {
              if ($scope.repaginatePromotionsForLayout(windowSize.rotatorColumnsForPage())) {
                carouselEl.find('.active').removeClass('active');
                carouselEl.find('.item:first-child').addClass('active');
                $scope.currentPage = 0;
                $scope.isPreviousDisabled = true;
                $scope.isForwardDisabled =
                Math.ceil(_.flatten($scope.promotions).length / promotionsPerSlide) == 1;
              }
            });
          }
        }
        Beacon.registerCarouselNavigationChange(OMNITURE_NAME, 'tab');
      });

      $scope.repaginatePromotionsForLayout = function (newPromotionsPerSlide) {
        var oldPromotionsPerSlide = promotionsPerSlide;
        promotionsPerSlide = newPromotionsPerSlide;

        if (newPromotionsPerSlide != oldPromotionsPerSlide) {
          $scope.paginatePromotions([]);
          return true;
        }
      };

      $scope.paginatePromotions = function (promotions) {
        var unchunkedPromotions = _.flatten($scope.promotions).concat(promotions);
        $scope.promotions = [];
        $scope.promotionChunkIndexes = [];
        _.each(chunkArray(unchunkedPromotions, promotionsPerSlide),
            function (promotionChunk, index) {
              $scope.promotions.push(promotionChunk);
              $scope.promotionChunkIndexes.push(index);
            });
      };

      $scope.showCouponPromotionsError = function () {
        return ($scope.loadError || $scope.promotions.length == 0) &&
               ($scope.couponPromotionPublishedAs == 'promotion');
      };

      $scope.showMyExtrasError = function () {
        if ($scope.isHotOffer) {
          return ($scope.loadError || !$scope.loggedIn ||
                  ($scope.loggedIn && $scope.optedForHotOffer && $scope.promotions.length == 0) ||
                  ($scope.loggedIn && !$scope.optedForHotOffer))
              && ($scope.isHotOffer);
        } else if ($scope.isMyExtras) {
          return ($scope.loadError || !$scope.loggedIn ||
                  ($scope.loggedIn && $scope.optedForMyExtras && $scope.promotions.length == 0) ||
                  ($scope.loggedIn && !$scope.optedForMyExtras))
              && ($scope.isMyExtras);
        }
      };

      $scope.showServerErrorForMyExtras = function () {
        return $scope.loadError && !$scope.promotionsLoading;
      }

      $scope.showNoCouponMessageForMyExtras = function () {
        if ($scope.isHotOffer) {
          return !$scope.loadError && $scope.loggedIn && $scope.optedForHotOffer &&
                 $scope.promotions.length == 0 && !$scope.promotionsLoading;
        } else if ($scope.isMyExtras) {
          return !$scope.loadError && $scope.loggedIn && $scope.optedForMyExtras &&
                 $scope.promotions.length == 0 && !$scope.promotionsLoading;
        }
      }

      $scope.showNotLoggedInMessageForMyExtras = function () {
        if ($scope.isHotOffer) {
          return (!$scope.loggedIn || ($scope.loggedIn && !$scope.optedForHotOffer)) &&
                 !$scope.promotionsLoading;
        } else if ($scope.isMyExtras) {
          return (!$scope.loggedIn || ($scope.loggedIn && !$scope.optedForMyExtras)) &&
                 !$scope.promotionsLoading;
        }
      }

      var chunkArray = function (array, chunkSize) {
        var chunkedArray = [];
        if (array) {
          for (var i = 0; i < array.length; i += chunkSize) {
            chunkedArray.push(array.slice(i, i + chunkSize));
          }
        }
        return chunkedArray;
      };

      var init = function () {
        $scope.repaginatePromotionsForLayout(windowSize.rotatorColumnsForPage());
        $rootScope.$broadcast('deals.couponPromotionsInitialized');

        if ($scope.loggedIn && $scope.couponPromotionPublishedAs == 'myextras') {
          AccountService.emailPreferences(function (response) {
            $scope.emailUngroupedPreferences = response.emailUngroupedPreferences;
            $scope.emailGroupedPreferences = response.emailGroupedPreferences;

            _.forEach(_.keys($scope.emailGroupedPreferences), function (key) {
              if (key.indexOf("extras") > -1) {
                _.forEach($scope.emailGroupedPreferences, function (groupedPref) {
                  _.forEach(groupedPref, function (child) {
                    if (child.selected) $scope.optedForMyExtras = true;

                    // Condition to check whether opted for HOT offer or not
                    if ((EnvLookup.couponSpecialPromotionsEmailPreferenceId == child.id) &&
                        child.selected) $scope.optedForHotOffer = true;
                  });
                });
              }
            });
            _.forEach($scope.emailUngroupedPreferences, function(emailPref){
                if(emailPref.selected) $scope.optedForHotOffer = true;
              }
            );
          });
        }
      };

      init();
    };
  });
});
/*]]>*/</script>
  <script>
    requireQ(["everything"], function() {
      melange.controller('couponPromotions_identifier', [
        '$scope', 'couponPromotions.Service', 'deals.Service', 'EnvLookup', '$rootScope', '$window',
        '$timeout', 'windowSize', 'coupons.Service', 'account.Service', 'beacon.Service', 'urlUtilities.Service',
            melange.gadgets.couponPromotions(null || [])
      ])
      ;
    });
  </script>

  <div ng-controller="couponPromotions_identifier" class="ng-scope">
    <div id="promotionsTabContent">
      <div id="promotionCarousel" class="carousel slide ng-hide" deals-carousel-swipe="true" ng-swipe-left="swipeLeft()" ng-swipe-right="swipeRight()" ng-show="promotions.length &gt; 0 &amp;&amp; !loadError">
        <div>
          <a class="left carousel-control" href="#promotionCarousel" data-slide="prev" aria-label="Scroll to Previous Promotion Items" ng-disabled="isPreviousDisabled" ng-click="onPrevSlide()" tabindex="-1" disabled="disabled"></a>
        </div>
        <div class="carousel-inner">
          <!-- ngRepeat: (promotionChunkIndexIndex, promotionChunkIndex) in promotionChunkIndexes track by $index -->
        </div>
        <div>
          <a class="right carousel-control" href="#promotionCarousel" data-slide="next" data-qa="promotion carousel right arrow button" ng-disabled="isForwardDisabled" ng-click="onNextSlide()" tabindex="0" aria-label="Scroll to Next Promotion Items"></a>
          <div class="offscreen ng-binding" role="alert" aria-live="" aria-relevent="all" tabindex="-1">
            
          </div>
        </div>
      </div>
      <div class="deals-section-error-panel -with-get-started-button ng-hide" ng-show="showCouponPromotionsError()">
        <div ng-show="loadError &amp;&amp; !promotionsLoading" class="deals-section-error-action ng-hide">
          <h2>We're sorry</h2>
          <p class="-coupon-get-started">There was a problem loading your coupon promotions.
            Please click here to continue browsing all coupon promotions.</p>
          <a class="button" href="">Get Started</a>
        </div>
        <div ng-show="!loadError &amp;&amp; (promotions.length == 0) &amp;&amp; !promotionsLoading" class="deals-section-error-action">
          <h2 class="ng-binding"></h2>
          <p class="-coupon-get-started ng-binding"></p>
          <a class="button ng-binding" href="" title=""></a>
        </div>
        <div ng-show="promotionsLoading" class="deals-section-error-loading ng-hide">Loading</div>
      </div>

      <div class="deals-section-error-panel -with-get-started-button ng-hide" ng-show="showMyExtrasError()">
        <div ng-show="showServerErrorForMyExtras()" class="deals-section-error-action ng-hide">
          <h2>We're sorry</h2>
          <p class="-coupon-get-started">There was a problem loading your coupon promotions.
            Please click here to continue browsing all coupon promotions.</p>
          <a class="button" href="">Get Started</a>
        </div>
        <div ng-show="showNoCouponMessageForMyExtras()" class="deals-section-error-action ng-hide">
          <h2 class="ng-binding"></h2>
          <p class="-coupon-get-started ng-binding"></p>
          <a class="button ng-binding" href="" title=""></a>
        </div>
        <div ng-show="showNotLoggedInMessageForMyExtras()" class="deals-section-error-action ng-hide">
          <h2 class="ng-binding"></h2>
          <p class="-coupon-get-started ng-binding"></p>
          <a class="button ng-binding" href="" title=""></a>
        </div>
        <div ng-show="promotionsLoading" class="deals-section-error-loading ng-hide">Loading</div>
      </div>
    </div>
  </div>
</section>

  <div id="noWeeklyAdsSection" class="deals-section deals-section-error-panel ng-hide" ng-show="showWeeklyAdsError()" data-qa="no weekly ads error">
    <div class="deals-section-error-action">
      <p class="-error-weekly-ads">We're sorry, there was a problem while loading your weekly ad,
      and we're working to resolve the issue as soon as possible.
      Please try again later.</p>
    </div>
  </div>
  <div id="noCouponsSection" class="deals-section deals-section-error-panel ng-hide" ng-show="showCouponsError()">
    <div class="deals-section-error-action" data-qa="no coupons error">
      <p>We're sorry, there was a problem loading your coupons,
      and we're working to resolve the issue as soon as possible.
      Please try again later.</p>
    </div>
  </div>
</div>





        </div>

        <section role="region" aria-label="Features" class="feature-section">
  <script>/*<![CDATA[*/
requireQ(["everything"], function() {
  common.register('melange.gadgets.feature', function (slot_content) {
    return function ($scope, $timeout, Content, Asset, Beacon, $window, windowSize) {
      if (slot_content.length == 0) return;
      $scope.features = [];
      $scope.isMultiFeatureContent = false;

      $scope.responsiveEnabled = windowSize.responsiveEnabled();
      var collection = slot_content[0];

      $scope.track = function (pos, link, headline) {
        Beacon.registerFeatureClick(link, pos, headline);
      };

      Content.query({id: _.map(collection.ids, function (item) { return item.identifier; })},
          function (data) {
            $scope.features = data;
            $scope.isMultiFeatureContent = $scope.features && $scope.features.length > 1;
            $.each($scope.features, function (index, feature) {
              if (feature && feature.image) {
                Asset.get({id: feature.image}, function (metadata) {
                  feature.imageMetadata = metadata;
                  feature.learnMoreLink = '/topic/' + feature.slug;
                });
              }
            });
            $('#featureCarousel').carousel({interval: false});
          });

      $scope.previous = function () {
        screenReaderMessage('You have scrolled to the previous feature.');
      }

      $scope.next = function () {
        screenReaderMessage('You have scrolled to the next feature.');
      }

      var screenReaderMessage = function (message) {
        $("#featureMessage").empty();
        $("#featureMessage").append('<div>'+message+'</div>');
        $timeout(function(){
          $("#featureMessage").empty();
        }, 500);
      }
    }
  });
});
/*]]>*/</script>
  <script>
    requireQ(["everything"], function() {
      melange.controller('feature_identifier', [
        '$scope', '$timeout', 'content.Service', 'asset.Service', 'beacon.Service', '$window', 'windowSize',
            melange.gadgets.feature([{'ids':[{'weight':2.612,'banners':{'BakersPlus':{'divisions':{'615':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'CityMarket':{'divisions':{'620':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'Dillons':{'divisions':{'615':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'Food4Less':{'divisions':{'704':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'708':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true},'FoodsCo':{'divisions':{'701':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'FrysFood':{'divisions':{'660':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'Gerbes':{'divisions':{'615':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'JaycFoods':{'divisions':{'090':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'KingSoopers':{'divisions':{'620':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'Kroger':{'divisions':{'011':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'014':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'016':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'018':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'021':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'024':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'025':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'026':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'029':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'034':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true},'OwensMarket':{'divisions':{'021':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'PayLess':{'divisions':{'021':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'QFC':{'divisions':{'705':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'Ralphs':{'divisions':{'703':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'},'SmithsFoodAndDrug':{'divisions':{'706':{'weight':'0.11','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.11'}},'rules':{'and':[{'rule':'banners?.containsKey(bannerName)','weight':0.001},{'or':[{'and':[{'rule':'banners[bannerName]?.divisions?.containsKey(divisionNumber)','weight':'(banners[bannerName]?.divisions[divisionNumber]?.weight?:0.001).toDouble()'},{'rule':'((banners[bannerName]?.divisions[divisionNumber]?.startDate?:startDate)..(banners[bannerName]?.divisions[divisionNumber]?.endDate?:endDate)).containsWithinBounds(today)','weight':0.001}]},{'and':[{'rule':'banners[bannerName]?.allDivisionSelected','weight':'(banners[bannerName]?.weight?:0.001).toDouble()'},{'rule':'banners[bannerName].divisions.every{key,value-> ((value?.startDate?:startDate)..(value?.endDate?:endDate)).containsWithinBounds(today) }','weight':0.001}]}]},{'rule':'allowedLoginState == \'all\' || allowedLoginState == loggedIn.toString()','weight':0.5},{'rule':'allowedLoginStateShoppers == \'all\' || allowedLoginStateShoppers == hasLoyaltyCard.toString()','weight':0.5},{'rule':'userPreferredStore == \'all\' || userPreferredStore == hasPreferredStore.toString()','weight':0.5},{'rule':'registeredUser == \'all\' || registeredUser == isRegistered.toString()','weight':0.5},{'rule':'emailOptInUser == \'all\' || emailOptInUser == isEmailOptInUser.toString()','weight':0.5}]},'identifier':'55ba5c6184ae5c89ea8eb1de','allowedLoginState':'all','allowedLoginStateShoppers':'all','userPreferredStore':'all','registeredUser':'all','emailOptInUser':'all'},{'weight':2.602,'banners':{'BakersPlus':{'divisions':{'615':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'CityMarket':{'divisions':{'620':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'Dillons':{'divisions':{'615':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'Food4Less':{'divisions':{'704':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'708':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true},'FoodsCo':{'divisions':{'701':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'FrysFood':{'divisions':{'660':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'Gerbes':{'divisions':{'615':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'JaycFoods':{'divisions':{'090':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'KingSoopers':{'divisions':{'620':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'Kroger':{'divisions':{'011':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'014':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'016':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'018':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'021':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'024':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'025':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'026':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'029':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'034':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true},'OwensMarket':{'divisions':{'021':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'PayLess':{'divisions':{'021':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'QFC':{'divisions':{'705':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'Ralphs':{'divisions':{'703':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'},'SmithsFoodAndDrug':{'divisions':{'706':{'weight':'0.1','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.1'}},'rules':{'and':[{'rule':'banners?.containsKey(bannerName)','weight':0.001},{'or':[{'and':[{'rule':'banners[bannerName]?.divisions?.containsKey(divisionNumber)','weight':'(banners[bannerName]?.divisions[divisionNumber]?.weight?:0.001).toDouble()'},{'rule':'((banners[bannerName]?.divisions[divisionNumber]?.startDate?:startDate)..(banners[bannerName]?.divisions[divisionNumber]?.endDate?:endDate)).containsWithinBounds(today)','weight':0.001}]},{'and':[{'rule':'banners[bannerName]?.allDivisionSelected','weight':'(banners[bannerName]?.weight?:0.001).toDouble()'},{'rule':'banners[bannerName].divisions.every{key,value-> ((value?.startDate?:startDate)..(value?.endDate?:endDate)).containsWithinBounds(today) }','weight':0.001}]}]},{'rule':'allowedLoginState == \'all\' || allowedLoginState == loggedIn.toString()','weight':0.5},{'rule':'allowedLoginStateShoppers == \'all\' || allowedLoginStateShoppers == hasLoyaltyCard.toString()','weight':0.5},{'rule':'userPreferredStore == \'all\' || userPreferredStore == hasPreferredStore.toString()','weight':0.5},{'rule':'registeredUser == \'all\' || registeredUser == isRegistered.toString()','weight':0.5},{'rule':'emailOptInUser == \'all\' || emailOptInUser == isEmailOptInUser.toString()','weight':0.5}]},'identifier':'55ba57bd84ae5c89ea8eb1b9','allowedLoginState':'all','allowedLoginStateShoppers':'all','userPreferredStore':'all','registeredUser':'all','emailOptInUser':'all'},{'weight':2.5620000000000003,'banners':{'BakersPlus':{'divisions':{'615':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'CityMarket':{'divisions':{'620':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'Dillons':{'divisions':{'615':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'Food4Less':{'divisions':{'704':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'708':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true},'FoodsCo':{'divisions':{'701':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'FrysFood':{'divisions':{'660':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'Gerbes':{'divisions':{'615':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'KingSoopers':{'divisions':{'620':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'Kroger':{'divisions':{'011':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'014':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'016':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'018':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'021':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'024':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'025':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'026':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'029':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'},'034':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true},'OwensMarket':{'divisions':{'021':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'PayLess':{'divisions':{'021':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'QFC':{'divisions':{'705':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'Ralphs':{'divisions':{'703':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'},'SmithsFoodAndDrug':{'divisions':{'706':{'weight':'0.06','endDate':'2015-08-15T23:59:59.999-04:00','startDate':'2015-08-02T00:00:00.000-04:00'}},'allDivisionSelected':true,'weight':'0.06'}},'rules':{'and':[{'rule':'banners?.containsKey(bannerName)','weight':0.001},{'or':[{'and':[{'rule':'banners[bannerName]?.divisions?.containsKey(divisionNumber)','weight':'(banners[bannerName]?.divisions[divisionNumber]?.weight?:0.001).toDouble()'},{'rule':'((banners[bannerName]?.divisions[divisionNumber]?.startDate?:startDate)..(banners[bannerName]?.divisions[divisionNumber]?.endDate?:endDate)).containsWithinBounds(today)','weight':0.001}]},{'and':[{'rule':'banners[bannerName]?.allDivisionSelected','weight':'(banners[bannerName]?.weight?:0.001).toDouble()'},{'rule':'banners[bannerName].divisions.every{key,value-> ((value?.startDate?:startDate)..(value?.endDate?:endDate)).containsWithinBounds(today) }','weight':0.001}]}]},{'rule':'allowedLoginState == \'all\' || allowedLoginState == loggedIn.toString()','weight':0.5},{'rule':'allowedLoginStateShoppers == \'all\' || allowedLoginStateShoppers == hasLoyaltyCard.toString()','weight':0.5},{'rule':'userPreferredStore == \'all\' || userPreferredStore == hasPreferredStore.toString()','weight':0.5},{'rule':'registeredUser == \'all\' || registeredUser == isRegistered.toString()','weight':0.5},{'rule':'emailOptInUser == \'all\' || emailOptInUser == isEmailOptInUser.toString()','weight':0.5}]},'identifier':'55c0d8de84ae5c89ea8eb3df','allowedLoginState':'all','allowedLoginStateShoppers':'all','userPreferredStore':'all','registeredUser':'all','emailOptInUser':'all'}]}] || [])
      ]);
    });
  </script>

    <div ng-controller="feature_identifier" class="ng-scope">
      <div id="featureCarousel" feature-carousel-swipe="" ng-swipe-left="swipeLeft()" ng-swipe-right="swipeRight()" next="next()" previous="previous()" class="carousel slide feature-carousel">
        <div id="featureMessage" class="offscreen" role="alert" aria-live="assertive" tabindex="-1"></div>
        <div ng-show="isMultiFeatureContent" class="">
          <a class="left carousel-control" href="#featureCarousel" data-slide="prev" aria-label="Scroll Previous Feature" ng-click="previous()"></a>
        </div>
        <div class="carousel-inner">
          <!-- ngRepeat: feature in features --><div ng-repeat="feature in features" ng-class="{item: true, active: $first}" class="ng-scope item active">
            <div class="feature" ng-show="feature" data-qa="feature carousel item">
              <!-- ngIf: !responsiveEnabled -->
              <!-- ngIf: responsiveEnabled --><span ng-if="responsiveEnabled" ng-show="feature.imageMetadata.frames.feature" class="feature-image-container ng-scope">
                <span show-media-alt="" show-media-src="/asset/55ba59bd84ae5c89ea8eb1ce?data=1" show-media="(min-width: 321px) and (max-width: 610px)" class="ng-isolate-scope"></span>
                <span data-qa="feature carousel responsive default image" show-media-alt="" show-media-src="/asset/55ba59bd84ae5c89ea8eb1cc?data=1" show-media="(max-width: 320px), (min-width: 611px)" show-media-default="true" class="ng-isolate-scope"><img src="/asset/55ba59bd84ae5c89ea8eb1cc?data=1" alt=""></span>
              </span><!-- end ngIf: responsiveEnabled -->
              <div class="feature-text-container">
                <div id="featureDetails_0">
                  <h1 class="feature-text-header ng-binding" data-qa="feature text header">Roses: Caring for Your Beautiful Blooms</h1>
                  <div class="feature-text-body ng-binding" data-qa="feature text body" ng-bind-html=" (feature.heroPanelRotatorText || feature.body) | truncate: 350 | markdown | trusted"><p>From trimming petals to understanding what their vibrant colors mean, learn all about caring for and enjoying roses.</p></div>
                </div>
                <a class="feature-text-link ng-binding" data-qa="feature text link" ng-click="track($index, feature.learnMoreLink, feature.heroPanelHeadline ? feature.heroPanelHeadline : feature.headline)" href="" aria-describedby="featureDetails_0">Learn More</a>
              </div>
            </div>
          </div><!-- end ngRepeat: feature in features --><div ng-repeat="feature in features" ng-class="{item: true, active: $first}" class="ng-scope item">
            <div class="feature" ng-show="feature" data-qa="feature carousel item">
              <!-- ngIf: !responsiveEnabled -->
              <!-- ngIf: responsiveEnabled --><span ng-if="responsiveEnabled" ng-show="feature.imageMetadata.frames.feature" class="feature-image-container ng-scope">
                <span show-media-alt="" show-media-src="/asset/55ba430e84ae5c89ea8eb1a9?data=1" show-media="(min-width: 321px) and (max-width: 610px)" class="ng-isolate-scope"></span>
                <span data-qa="feature carousel responsive default image" show-media-alt="" show-media-src="/asset/55ba430e84ae5c89ea8eb1a7?data=1" show-media="(max-width: 320px), (min-width: 611px)" show-media-default="true" class="ng-isolate-scope"><img src="/asset/55ba430e84ae5c89ea8eb1a7?data=1" alt=""></span>
              </span><!-- end ngIf: responsiveEnabled -->
              <div class="feature-text-container">
                <div id="featureDetails_1">
                  <h1 class="feature-text-header ng-binding" data-qa="feature text header">Blended Beef Mushroom Burgers</h1>
                  <div class="feature-text-body ng-binding" data-qa="feature text body" ng-bind-html=" (feature.heroPanelRotatorText || feature.body) | truncate: 350 | markdown | trusted"><p>This delicious burger is made from a blend of lean ground beef and finely chopped mushrooms.</p></div>
                </div>
                <a class="feature-text-link ng-binding" data-qa="feature text link" ng-click="track($index, feature.learnMoreLink, feature.heroPanelHeadline ? feature.heroPanelHeadline : feature.headline)" href="" aria-describedby="featureDetails_1">View Recipe</a>
              </div>
            </div>
          </div><!-- end ngRepeat: feature in features --><div ng-repeat="feature in features" ng-class="{item: true, active: $first}" class="ng-scope item">
            <div class="feature" ng-show="feature" data-qa="feature carousel item">
              <!-- ngIf: !responsiveEnabled -->
              <!-- ngIf: responsiveEnabled --><span ng-if="responsiveEnabled" ng-show="feature.imageMetadata.frames.feature" class="feature-image-container ng-scope">
                <span show-media-alt="" show-media-src="/asset/55c0d7b684ae5c89ea8eb3cf?data=1" show-media="(min-width: 321px) and (max-width: 610px)" class="ng-isolate-scope"></span>
                <span data-qa="feature carousel responsive default image" show-media-alt="" show-media-src="/asset/55c0d7b684ae5c89ea8eb3cd?data=1" show-media="(max-width: 320px), (min-width: 611px)" show-media-default="true" class="ng-isolate-scope"><img src="/asset/55c0d7b684ae5c89ea8eb3cd?data=1" alt=""></span>
              </span><!-- end ngIf: responsiveEnabled -->
              <div class="feature-text-container">
                <div id="featureDetails_2">
                  <h1 class="feature-text-header ng-binding" data-qa="feature text header">Summer Celebrations</h1>
                  <div class="feature-text-body ng-binding" data-qa="feature text body" ng-bind-html=" (feature.heroPanelRotatorText || feature.body) | truncate: 350 | markdown | trusted"><p>Gather your friends and celebrate summer! Get tasty recipes, party planning tips and more.</p></div>
                </div>
                <a class="feature-text-link ng-binding" data-qa="feature text link" ng-click="track($index, feature.learnMoreLink, feature.heroPanelHeadline ? feature.heroPanelHeadline : feature.headline)" href="" aria-describedby="featureDetails_2">Learn More</a>
              </div>
            </div>
          </div><!-- end ngRepeat: feature in features -->
        </div>
        <div ng-show="isMultiFeatureContent" class="">
          <a class="right carousel-control" href="#featureCarousel" data-slide="next" aria-label="Scroll Next Feature" ng-click="next()"></a>
        </div>
        <div class="carousel-indicators-wrapper" ng-show="features.length &gt; 1">
          <ol class="carousel-indicators">
            <!-- ngRepeat: feature in features --><li keyboard-click="" data-target="#featureCarousel" data-slide-to="0" ng-class="{active:$first}" ng-repeat="feature in features" tabindex="0" aria-label="blank" class="ng-scope active"></li><!-- end ngRepeat: feature in features --><li keyboard-click="" data-target="#featureCarousel" data-slide-to="1" ng-class="{active:$first}" ng-repeat="feature in features" tabindex="0" aria-label="blank" class="ng-scope"></li><!-- end ngRepeat: feature in features --><li keyboard-click="" data-target="#featureCarousel" data-slide-to="2" ng-class="{active:$first}" ng-repeat="feature in features" tabindex="0" aria-label="blank" class="ng-scope"></li><!-- end ngRepeat: feature in features -->
          </ol>
        </div>
      </div>
    </div>
</section>
      </div>
    </div>

    <div><footer role="contentinfo">
    <div>
  <div class="scoped-to-banner">
    <script>
      requireQ(["everything"], function() {
        melange.controller('footer_identifier', [
          '$scope', 'content.Service', '$window', 'trackable.Service',
          function ($scope, Content, $window, Trackable) {
            var slot_content =
            ['5245e9743283475a6784e585']
            ||
            [];
            Content.queryBySlotContent(slot_content, function (data) {
              var html = $(data[0].body);
              var trackableHTML = $(Trackable.trackAnchors(html, "footer"));
              trackableHTML.find('#responsive-footer-feedback')
                  .attr('onclick', 'return openOpinionLabPopup()');

              $window.openOpinionLabPopup = function () {
                $scope.$emit('showOpinionLabPopup');
                $scope.$apply();
                return false;
              };

              if (trackableHTML.size() > 0) {
                $scope.messages = trackableHTML[0].outerHTML;
              }
            });
          }
        ]);
      });
    </script>
    <div class="banner-footer ng-scope ng-binding" ng-bind-html="messages | trusted" ng-controller="footer_identifier"><ul><li><h1>About the Company</h1>
    <ul>
      <li><a href="http://www.thekrogerco.com" title="About the Company" bnr-href="http://www.thekrogerco.com" onclick="return track('AbouttheCompany', 'www.thekrogerco.com','http://www.thekrogerco.com','footer')">About the Company</a></li>
      <li><a href="https://jobs.kroger.com/king-soopers/go/King-Soopers/571400/" title="Careers" bnr-href="https://jobs.kroger.com/king-soopers/go/King-Soopers/571400/" onclick="return track('Careers', 'www.thekrogerco.com','https://jobs.kroger.com/king-soopers/go/King-Soopers/571400/','footer')">Careers</a></li>
      <li><a href="/topic/community" title="Community" bnr-href="/topic/community" onclick="return track('Community', 'www.thekrogerco.com','/topic/community','footer')">Community</a></li><a href="/topic/community" title="Community" bnr-href="/topic/community" onclick="return track('', 'www.thekrogerco.com','/topic/community','footer')">
      </a><li><a href="/topic/community" title="Community" bnr-href="/topic/community" onclick="return track('', 'www.thekrogerco.com','/topic/community','footer')"></a><a href="https://ess.kroger.com/" target="_blank" bnr-href="https://ess.kroger.com/" onclick="return track('ExpressHR', 'www.thekrogerco.com','https://ess.kroger.com/','footer')">Express HR</a></li>
      <li><a href="http://ir.kroger.com" target="_blank" bnr-href="http://ir.kroger.com" onclick="return track('InvestorRelations', 'www.thekrogerco.com','http://ir.kroger.com','footer')">Investor Relations</a></li>
      <li><a href="http://www.krogerrealestate.com/" target="_blank" bnr-href="http://www.krogerrealestate.com/" onclick="return track('KrogerRealEstate', 'www.thekrogerco.com','http://www.krogerrealestate.com/','footer')">Kroger Real Estate</a></li>
      <li><a href="http://www.thekrogerco.com/news-room" target="_blank" bnr-href="http://www.thekrogerco.com/news-room" onclick="return track('NewsRoom', 'www.thekrogerco.com','http://www.thekrogerco.com/news-room','footer')">News Room</a></li>
      <li><a href="http://www.thekrogerco.com/vendors-suppliers" target="_blank" bnr-href="http://www.thekrogerco.com/vendors-suppliers" onclick="return track('Vendors&amp;Suppliers', 'www.thekrogerco.com','http://www.thekrogerco.com/vendors-suppliers','footer')">Vendors &amp; Suppliers</a></li></ul></li>
  

<li><h1>Community</h1>
    <ul>
      <li><a href="http://www.bringinghopetothetable.com/" target="_blank" bnr-href="http://www.bringinghopetothetable.com/" onclick="return track('BringingHopetotheTable', 'www.thekrogerco.com','http://www.bringinghopetothetable.com/','footer')">Bringing Hope to the Table</a></li>
      <li><a href="http://www.sharingcourage.com/" target="_blank" bnr-href="http://www.sharingcourage.com/" onclick="return track('GivingHopeaHand', 'www.thekrogerco.com','http://www.sharingcourage.com/','footer')">Giving Hope a Hand</a></li>
      <li><a href="http://www.honoringourheroes.com/" target="_blank" bnr-href="http://www.honoringourheroes.com/" onclick="return track('HonoringOurHeroes', 'www.thekrogerco.com','http://www.honoringourheroes.com/','footer')">Honoring Our Heroes</a></li>
      <li><a href="/topic/salvation-army" bnr-href="/topic/salvation-army" onclick="return track('SalvationArmy', 'www.thekrogerco.com','/topic/salvation-army','footer')">Salvation Army</a></li>
      <li><a href="http://sustainability.kroger.com/" target="_blank" bnr-href="http://sustainability.kroger.com/" onclick="return track('Sustainability', 'www.thekrogerco.com','http://sustainability.kroger.com/','footer')">Sustainability</a></li>
    </ul>


</li><li><h1>Customer Service</h1>
    <ul>
      <li><a href="/topic/digital-faqs" bnr-href="/topic/digital-faqs" onclick="return track('FAQs', 'www.thekrogerco.com','/topic/digital-faqs','footer')">FAQs</a></li>
      <li><a href="/account/create" bnr-href="/account/create" onclick="return track('AccountRegistration', 'www.thekrogerco.com','/account/create','footer')">Account Registration</a></li>
      <li><a href="/article/contact-us" bnr-href="/article/contact-us" onclick="return track('ContactUs', 'www.thekrogerco.com','/article/contact-us','footer')">Contact Us</a></li>
      <li><a href="/customercomments" bnr-href="/customercomments" onclick="return track('CustomerComments', 'www.thekrogerco.com','/customercomments','footer')">Customer Comments</a></li>
      <li><a href="/article/digital-coupons-policy" bnr-href="/article/digital-coupons-policy" onclick="return track('DigitalCouponsPolicy', 'www.thekrogerco.com','/article/digital-coupons-policy','footer')">Digital Coupons Policy</a></li>
      <li><a href="/topic/pharmacy-faq" bnr-href="/topic/pharmacy-faq" onclick="return track('MyPrescriptionsFAQs', 'www.thekrogerco.com','/topic/pharmacy-faq','footer')">My Prescriptions FAQs</a></li>
      <li><a href="/recall_alerts" title="Recall Alerts" bnr-href="/recall_alerts" onclick="return track('RecallAlerts', 'www.thekrogerco.com','/recall_alerts','footer')">Recall Alerts</a></li>
      <li><a href="" id="responsive-footer-feedback" title="Feedback" bnr-href="" onclick="return openOpinionLabPopup()">Feedback</a></li>
      </ul>
  
  
</li><li><h1>Online Services</h1>
    <ul>
      <li><a href="/delibakery" bnr-href="/delibakery" onclick="return track('DeliBakeryOrdering', 'www.thekrogerco.com','/delibakery','footer')">Deli/Bakery Ordering</a></li>
      <li><a href="/coupons" bnr-href="/coupons" onclick="return track('DigitalCoupons', 'www.thekrogerco.com','/coupons','footer')">Digital Coupons</a></li>
      <li><a href="http://giftcards.kingsoopers.com" bnr-href="http://giftcards.kingsoopers.com" onclick="return track('GiftCardMall', 'www.thekrogerco.com','http://giftcards.kingsoopers.com','footer')">Gift Card Mall</a></li>
      <li><a href="https://homeshop.kroger.com/sf/servlet/storefront" bnr-href="https://homeshop.kroger.com/sf/servlet/storefront" onclick="return track('HomeShop', 'www.thekrogerco.com','https://homeshop.kroger.com/sf/servlet/storefront','footer')">HomeShop</a></li>
      <li><a href="/article/survey" bnr-href="/article/survey" onclick="return track('JoinOurCustomerPanel', 'www.thekrogerco.com','/article/survey','footer')">Join Our Customer Panel</a></li>
      <li><a href="/topic/mobile-app" bnr-href="/topic/mobile-app" onclick="return track('MobileApp', 'www.thekrogerco.com','/topic/mobile-app','footer')">Mobile App</a></li>
      <li><a href="/topic/email-monthly-newsletter" bnr-href="/topic/email-monthly-newsletter" onclick="return track('MonthlyNewsletterSubscription', 'www.thekrogerco.com','/topic/email-monthly-newsletter','footer')">Monthly Newsletter Subscription</a></li>
      <li><a href="http://krogerfeedback.com" bnr-href="http://krogerfeedback.com" onclick="return track('ReceiptSurveyInvitation', 'www.thekrogerco.com','http://krogerfeedback.com','footer')">Receipt Survey Invitation</a></li>
      <li><a href="/recipes" bnr-href="/recipes" onclick="return track('Recipes', 'www.thekrogerco.com','/recipes','footer')">Recipes</a></li>
      <li><a href="/topic/request-a-donation" bnr-href="/topic/request-a-donation" onclick="return track('RequestaDonation', 'www.thekrogerco.com','/topic/request-a-donation','footer')">Request a Donation</a></li>
      <li><a href="/list" bnr-href="/list" onclick="return track('ShoppingList', 'www.thekrogerco.com','/list','footer')">Shopping List</a></li>
      <li><a href="/storeLocator" bnr-href="/storeLocator" onclick="return track('StoreLocator', 'www.thekrogerco.com','/storeLocator','footer')">Store Locator</a></li>
      <li><a href="/weeklyAd" title="Weekly Ad" bnr-href="/weeklyAd" onclick="return track('WeeklyAd', 'www.thekrogerco.com','/weeklyAd','footer')">Weekly Ad</a></li></ul></li>
      
     <li>
    <img src="/asset/vn_c3ca78dde1bfd37550d7e9c002a183f8/kpf_kingsoopers_2" alt="1-2-3 REWARDS Visa Card">
    <h1>Get the Card</h1>
    <ul>
      <li><a href="http://www.123rewardscard.com/93966" bnr-href="http://www.123rewardscard.com/93966" onclick="return track('ApplyNow', 'www.thekrogerco.com','http://www.123rewardscard.com/93966','footer')">Apply Now</a></li>
      <li><a href="http://www.123rewardscard.com" bnr-href="http://www.123rewardscard.com" onclick="return track('ManagemyCard', 'www.thekrogerco.com','http://www.123rewardscard.com','footer')">Manage my Card</a></li>
      <li><a href="/topic/1-2-3-rewards-visa-card" bnr-href="/topic/1-2-3-rewards-visa-card" onclick="return track('RewardsandBenefits', 'www.thekrogerco.com','/topic/1-2-3-rewards-visa-card','footer')">Rewards and Benefits</a></li>

      </ul></li>
 
    
</ul></div>
    <div class="version">
      <div style="display:none;">site</div>
      <div style="display:none;">5.39.1-1_gccc1e23/14</div>
    </div>
    <span seo-crawlable-indicator="true"><span id="thisPageIsSeoCrawlable"></span></span>
  </div>
</div>
    <div>
  <div class="scoped-to-banner">
    <div class="footerCopyRights">
      <p>All Contents  Copyright <span>2015</span> The Kroger Co. All Rights Reserved </p>
      <p class="policyLinks"><a href="/pharmacyprivacy">Pharmacy Privacy Notice</a> <span class="footer-copyright-pipe">|</span>
        <a data-qa="terms_and_conditions" href="/termsandconditions">Terms and Conditions</a> <span class="footer-copyright-pipe">|</span>
        <a data-qa="privacy_policy" href="/privacypolicy">Privacy Policy</a></p>
    </div>
  </div>
</div>
    <div>

<script type="text/javascript">
window.localEnvironment.socialRibbon = {
  facebook:'https://www.facebook.com/kingsoopers/app_190322544333196',
  twitter:'https://twitter.com/MyKingSoopers',
  youtube:'https://www.youtube.com/mykingsoopers',
  pinterest:'https://pinterest.com/kingsoopers/',
  mobilegoogleplay:'https://play.google.com/store/apps/details?id=com.kingsoopers.mobile',
  mobileappstore:'https://itunes.apple.com/us/app/king-soopers/id584397734?ls=1%26mt=8'
};


</script>
<script>/*<![CDATA[*/
requireQ(["everything"], function() {
  common.register('melange.gadgets.socialRibbon',
      melange.gadgets.socialRibbon = function ($scope, $window) {
        $scope.twitter = $window.localEnvironment.socialRibbon.twitter;
        $scope.facebook = $window.localEnvironment.socialRibbon.facebook;
        $scope.youtube = $window.localEnvironment.socialRibbon.youtube;
        $scope.pinterest = $window.localEnvironment.socialRibbon.pinterest;
        $scope.android = $window.localEnvironment.socialRibbon.mobilegoogleplay;
        $scope.apple = $window.localEnvironment.socialRibbon.mobileappstore;

        $scope.showTwitter = !_.isEmpty($scope.twitter);
        $scope.showFacebook = !_.isEmpty($scope.facebook);
        $scope.showPinterest = !_.isEmpty($scope.pinterest);
        $scope.showYoutube = !_.isEmpty($scope.youtube);
        $scope.showAndroid = !_.isEmpty($scope.android);
        $scope.showApple = !_.isEmpty($scope.apple);
        $scope.isSocialIconsEmpty =
        (_.isEmpty($scope.twitter) && _.isEmpty($scope.facebook) && _.isEmpty($scope.youtube) &&
         _.isEmpty($scope.pinterest));
        $scope.isMobileIconsEmpty = (_.isEmpty($scope.android) && _.isEmpty($scope.apple));
        $scope.ribbonVisible = !($scope.isSocialIconsEmpty && $scope.isMobileIconsEmpty);
      });

  melange.controller('socialRibbonController', ['$scope', '$window', melange.gadgets.socialRibbon]);
});
/*]]>*/
</script>
<div ng-controller="socialRibbonController" ng-show="ribbonVisible" class="scoped-to-banner ng-scope">
  <div class="socialIconRibbon">
    <ul id="socialRibbon">
      <li class="twitter" data-qa="socialRibbon.twitter" ng-show="showTwitter"><a ng-href="https://twitter.com/MyKingSoopers" href="https://twitter.com/MyKingSoopers"></a></li>
      <li class="facebook" data-qa="socialRibbon.facebook" ng-show="showFacebook"><a ng-href="https://www.facebook.com/kingsoopers/app_190322544333196" href="https://www.facebook.com/kingsoopers/app_190322544333196"></a></li>
      <li class="youtube" data-qa="socialRibbon.youtube" ng-show="showYoutube"><a ng-href="https://www.youtube.com/mykingsoopers" href="https://www.youtube.com/mykingsoopers"></a></li>
      <li class="pininterest" data-qa="socialRibbon.pininterest" ng-show="showPinterest"><a ng-href="https://pinterest.com/kingsoopers/" href="https://pinterest.com/kingsoopers/"></a></li>
      <li class="separator" data-qa="socialRibbon.separator" ng-hide="isSocialIconsEmpty || isMobileIconsEmpty"></li>
      <ul class="mobile-app-icons">
        <li class="android" data-qa="socialRibbon.android" ng-show="showAndroid"><a ng-href="https://play.google.com/store/apps/details?id=com.kingsoopers.mobile" href="https://play.google.com/store/apps/details?id=com.kingsoopers.mobile"></a></li>
        <li class="apple" data-qa="socialRibbon.apple" ng-show="showApple"><a ng-href="https://itunes.apple.com/us/app/king-soopers/id584397734?ls=1%26mt=8" href="https://itunes.apple.com/us/app/king-soopers/id584397734?ls=1%26mt=8"></a></li>
      </ul>
    </ul>
  </div>
</div>
</div>
</footer></div>

    <div><script language="JavaScript">
  requireQ(["everything"], function() {
    var omnitureEnabled = 'true';
    melange.app.beacon.omnitureAccount = 'krgrkingsoopersprod,krgrglobalprod';
    melange.app.beacon.globals =
    {
      loggedIn: false,
      bannerName: 'KingSoopers',
      pid: '',
      channel: 'web',
      loyalMember: null
    };

    var track = function() {};

    melange.controller('TrackingController', [
      '$rootScope', 'beacon.Service', function ($rootScope, Beacon) {
        var topNavLoaded, topicLoaded, pageLoadSent = false;
        var waitForTopic = location.pathname.indexOf("/topic/") == 0;

        $rootScope.$on('topNavigationLoaded', function () {
          topNavLoaded = true;
          if (!waitForTopic || topicLoaded) {
            pageLoad();
          }
        });

        $rootScope.$on('topicLoaded', function () {
          topicLoaded = true;
          if (topNavLoaded) {
            pageLoad();
          }
        });

        function pageLoad() {
          if (!pageLoadSent) {
            pageLoadSent = true;
            Beacon.registerPageLoad();
          }
        };

        window.track = function (elementName, pageName, href, navType) {
          if (omnitureEnabled === 'true') {
            if (navType == 'topnav') {
              return Beacon.registerNavClick('topnav_' + elementName, href);
            }
            else if(navType == 'topic') {
              return Beacon.registerTopicHrefClick('topic_' + pageName + '_' + elementName, href);
            }
            else {
              return Beacon.registerFooterLinkClick('footer_' + elementName, href);
            }
          }
        };
      }
    ]);
  });
</script>
<noscript>
  &lt;a href="http://www.omniture.com" title="Web Analytics"&gt;
    &lt;img height="1" width="1" border="0" alt="" src="http://krgrkingsoopersprod,krgrglobalprod.112.2O7.net/b/ss/krgrkingsoopersprod,krgrglobalprod/1/H.14--NS/0" /&gt;
  &lt;/a&gt;
</noscript>

<div ng-controller="TrackingController" style="display:none;" class="ng-scope">
</div></div>

    <div>
      <div>
  <div><!--
OnlineOpinion v5.6.5
Released: 12/17/2012. Compiled 01/02/2013 10:54:34 AM -0600
Branch: master 6f7c9076b20d959805996192556bbd12b2014c7d
Components: Full
The following code is Copyright 1998-2013 Opinionlab, Inc.  All rights reserved. Unauthorized use is prohibited. This product and other products of OpinionLab, Inc. are protected by U.S. Patent No. 6606581, 6421724, 6785717 B1 and other patents pending. http://www.opinionlab
--><!-- INVITATION PROMPT MARKUP --><noscript>This JavaScript enables OnlineOpinion, a method for collecting secure feedback data.</noscript>
<script>
  /*<![CDATA[*/
  requireQ(["everything"], function() {
    var invite_percentage = 5;
    var isOpinionLabAllowed = true;
    /*]]>*/

    // BST-3158 - Sadique and George - This is to take care of OpinionLab showing up on Android mobile devices.

    if (isOpinionLabAllowed) {
      var oo_invite = wireUpOpinionLabInvite();
    }

    function wireUpOpinionLabInvite() {
      return new OOo.Invitation({
        /* REQUIRED - Asset identification */
        pathToAssets: '/fragment/',
        /* OPTIONAL - Configuration */
        promptMarkup: 'opinionlabInvitationPrompt',
        monitorWindow: 'opinionlabInvitationMonitor',
        responseRate: invite_percentage,
        repromptTime: 2592000,
        promptDelay: 4,
        popupType: 'popunder',
//	, companyLogo: '/onlineopinionV5/logo.gif'  // 355px by 55px
        referrerRewrite: {
          searchPattern: /:\/\//g,
          replacePattern: '://invite.'
        }
      });
    };
  });
</script>
<!-- END: OnlineOpinion v5.6.5 --></div>
</div>
    </div>
  </div>
</div>

<div><script>
  Q.all(allAppPromises).then(function() {
    appReadyDeferred.resolve();
  });
  var addViewportMetaTagForResponsive = function() {
    if(document.getElementById("grid-wrap").className.indexOf('row-fluid') > -1){
      var viewPortTag = document.createElement('meta');
      viewPortTag.id = "viewport";
      viewPortTag.name = "viewport";
      viewPortTag.content = "user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1";
      window.parent.document.getElementsByTagName('head')[0].appendChild(viewPortTag);
    }
  }
  addViewportMetaTagForResponsive();

</script>

</div>

</body></html>